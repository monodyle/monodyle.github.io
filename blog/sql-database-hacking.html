<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#24292e"/><meta name="apple-mobile-web-app-title" content="The Monody\&#x27;s Blog"/><meta name="application-name" content="The Monody\&#x27;s Blog"/><meta name="msapplication-TileColor" content="#1366E9"/><meta name="theme-color" content="#ffffff"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Mấy cái trò Database Hacking</title><meta name="title" content="Mấy cái trò Database Hacking"/><meta name="description" content="Hôm nọ mình vừa đọc được một bài write-up của một bạn White-hat sau khi báo cáo lại lỗ hổng trên trang web của Đại học Harvard, tự dưng thấy kỹ năng về bảo mật của mình bao lâu nay... kém ghê"/><meta name="image" content="https://monodyle.github.io/assets/blog/sql-database-hacking/featured.jpg"/><meta property="og:url" content="https://monodyle.github.iosql-database-hacking"/><meta property="og:type" content="website"/><meta property="og:title" content="Mấy cái trò Database Hacking"/><meta property="og:description" content="Hôm nọ mình vừa đọc được một bài write-up của một bạn White-hat sau khi báo cáo lại lỗ hổng trên trang web của Đại học Harvard, tự dưng thấy kỹ năng về bảo mật của mình bao lâu nay... kém ghê"/><meta property="og:image" content="https://monodyle.github.io/assets/blog/sql-database-hacking/featured.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="Monody Le"/><meta name="twitter:title" content="Mấy cái trò Database Hacking"/><meta name="twitter:description" content="Hôm nọ mình vừa đọc được một bài write-up của một bạn White-hat sau khi báo cáo lại lỗ hổng trên trang web của Đại học Harvard, tự dưng thấy kỹ năng về bảo mật của mình bao lâu nay... kém ghê"/><meta name="twitter:image" content="https://monodyle.github.io/assets/blog/sql-database-hacking/featured.jpg"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/b1e90fe7bec17ef9b472.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b1e90fe7bec17ef9b472.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/commons.7dc06adcda08254d2e3f.js" as="script"/><link rel="preload" href="/_next/static/chunks/16.45ddf154bba726880caa.js" as="script"/><link rel="preload" href="/_next/static/chunks/12.720a9abe0c6b7cb2a70d.js" as="script"/><link rel="preload" href="/_next/static/chunks/14.c5b6efb7e620b8334c84.js" as="script"/><link rel="preload" href="/_next/static/chunks/15.1a76e610d1288eacfac2.js" as="script"/><link rel="preload" href="/_next/static/chunks/13.072d922be53c1981f85a.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-db5dd7cc9961c8f329e5.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.e323d2309acd04cbe6bd.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.7dc06adcda08254d2e3f.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-764a36cd19927cc4b846.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-9bab551711714ca2a3b3.js" as="script"/><link rel="preload" href="/_next/static/chunks/3ef7d5233a475358d3f5445cedfd796963ec93af.5cd6ceb74ee51c25448c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-76ee27151674d4ca0a8e.js" as="script"/></head><body><div id="__next"><div class="min-h-full font-sans antialiased text-black bg-light-gray"><header class="w-full"><div class="container mx-auto"><a class="flex items-center pt-16 mb-4" href="/"><img src="/favicon-32x32.png" alt="logo"/><strong class="pl-2 font-mono">The Monody&#x27;s Blog</strong></a><nav class="hidden tablet:block"><div class="flex items-center font-mono text-mid-gray"><div><a href="/"><span class="tracking-wide font-semibold text-dark-gray">Home</span></a><span class="px-4">/</span></div><div><a href="/blog"><span class="tracking-wide font-semibold text-primary">Blog</span></a><span class="px-4">/</span></div><div><a href="/about"><span class="tracking-wide font-semibold text-dark-gray">About</span></a><span class="px-4">/</span></div><div><a href="https://github.com/monodyle" target="_blank" rel="noopener noreferrer"><span class="tracking-wide font-semibold text-dark-gray">GitHub</span></a></div></div></nav></div></header><main class="pb-16"><div class="container"><article class="py-8"><h1 id="article-title" class="mb-10 text-3xl">Mấy cái trò Database Hacking</h1><div class="mb-10 bg-light-gray desktop:-mx-24"><img src="/assets/blog/sql-database-hacking/featured.jpg" alt="Mấy cái trò Database Hacking" title="Mấy cái trò Database Hacking"/></div><div class="flex justify-between"><time class="block mb-10 font-mono text-black">Mar 15, 2020</time><div class="flex justify-end tag-group"><span class="mr-4 font-mono font-medium text-black tag">dev</span><span class="mr-4 font-mono font-medium text-black tag">web</span><span class="mr-4 font-mono font-medium text-black tag">database</span><span class="mr-4 font-mono font-medium text-black tag">hacking</span><span class="mr-4 font-mono font-medium text-black tag">security</span></div></div><div id="content"><div><p>Hôm nọ mình vừa đọc được một bài write-up của một bạn white-hat sau khi báo cáo lại lỗ hổng SQL Injection trên trang web của Đại học Harvard, tự dưng thấy kỹ năng về bảo mật của mình bao lâu nay... kém ghê.</p><p>Bản thân là sinh viên chuyên ngành <strong>Hệ Thống Thông Tin</strong>, tức là chuyên ngồi đấu vật với mấy cái cơ sở dữ liệu mà lại rất hay quên đi những cái quan trọng như thế này... Cảm thấy xấu hổ, thế là mình phải mò lại những gì mình đã học, nhưng không dùng tới lại quên mất, rồi viết thành một blog để coi như vừa học lại, vừa chia sẻ kiến thức cho mọi người :smug: <del>Mình thật tuyệt</del></p><h2 id="thằng-chó-mày-hack-web-bố-mày">Thằng chó, mày hack web bố mày...</h2><p>Hè vừa rồi mình có trò chuyện với một ông anh trong nghề, ổng tâm sự về chuyện bị thằng nào thả bot nó clean mẹ cái database, để lại đúng một dòng duy nhất:</p><blockquote><p>Gửi bố mày vài Bitcoin đê, bố mày trả lại dữ liệu cho... :lookdown:</p></blockquote><p>Và kèm theo đó là địa chỉ ví bitcoin của hắn :surrender: Tính ông anh mình được cái thật thà, nhà cũng không có gì ngoài điều kiện, thế là gửi cho nó vài bitcoin coi như tiền ăn sáng, hôm sau thấy nó restore lại dữ liệu thật :mokas:</p><p>Nhưng mà tức quá, ai đời làm lập trình có sản phẩm đang chạy phà phà lại có thằng choá nào hack, nghĩ có cay không cơ chứ? :yikes:</p><p>Mình không rõ là cái database đó bị hack như thế nào, nhưng khá chắc chắn phần lớn là bởi vì code chưa đủ bảo mật và có nhiều lỗ hổng. Các hacker sẽ viết một con bot chuyên đi dạo trên mạng để attack vào những case bảo mật thường dễ bị hack nhất.</p><p>Vì vậy bài viết này mình sẽ giới thiệu cho các bạn một loại lỗ hổng <strong>cơ bản</strong> nhưng cực kỳ nguy hiểm, giải thích cơ chế và hướng dẫn cách phòng chống. Và xin giới thiệu cái trò gọi là <strong>SQL Injection</strong>.</p><div class="note" emoji="1"><p><strong>Lưu ý:</strong></p><p>Bài viết này nhằm mục đích giao lưu kỹ năng bảo mật lập trình, không cổ suý các bạn đi phá làng phá xóm. Hãy tỉnh táo :smug:</p></div><h2 id="nhập-môn-hack-cơ-sở-dữ-liệu-sql">Nhập môn hack Cơ sở dữ liệu SQL</h2><p>Trong nhiều loại tấn công lỗ hổng nhằm vào website, tấn công <strong>SQL Injection</strong> là một trong những loại nguy hiểm và phổ biến nhất. Nó đã từng gây ra nhiều thiệt hại đáng kể cho nhiều doanh nghiệp và tổ chức trong rất nhiều năm, và đương nhiên sẽ còn tiếp diễn trong tương lai.</p><img title="SQL Injection là gì??" alt="SQL Injection là gì??" src="/blog/sql-database-hacking/draw-01.jpg"/><p>Theo <a href="https://vi.wikipedia.org/wiki/SQL_injection">Wikipedia</a> :popcorn::</p><blockquote><p><strong>SQL injection</strong> là một kỹ thuật cho phép những kẻ tấn công lợi dụng lỗ hổng của việc kiểm tra dữ liệu đầu vào trong các ứng dụng web và các thông báo lỗi của hệ quản trị cơ sở dữ liệu trả về để <em>inject</em> (<em>tiêm vào</em>) và thi hành các câu lệnh SQL <u>bất hợp pháp</u>.</p></blockquote><p>Ờ thì khái niệm như vậy đấy, hiểu một cách đơn giản tức là loại tấn công này nhằm vào các <strong>input</strong> có <strong>tương tác trực tiếp</strong> với <strong>database</strong> ở <strong>back-end</strong> (ví dụ như các input email, password ở form login). Thông thường, attacker sẽ tấn công để ăn cắp dữ liệu, loại này về cơ bản là hiền nhất, sau đó tới xáo trộn dữ liệu để cản trở sự hoạt động của website, và trường hợp xấu nhất, là quyền truy cập quản trị vào máy chủ database bị chiếm. :moka:</p><p>Trong lịch sử, đã có rất nhiều đợt tấn công SQL Injection nhằm mục đích:</p><ul><li>Trích xuất thông tin nhạy cảm, ví dụ như về an sinh xã hội, hay thông tin thẻ tín dụng</li><li>Trích xuất thông tin người dùng đã được đăng ký trên các website, ở Việt Nam cũng không ít trường hợp</li><li>Xoá luôn cái database, có rất nhiều trang web không sử dụng backup dữ liệu, và khi bị xoá thì coi như cả hệ thống tê liệt, ví dụ của ông anh bên trên là ví dụ gần gũi nhất</li><li>Tiêm mã độc thực thi vào trang web khi người dùng truy cập</li></ul><p><strong>Nhắc lại một lần nữa:</strong> Tấn công về SQL Injection cực kỳ phổ biến. Các công ty lớn như <strong>Yahoo</strong> hay <strong>Sony</strong> đã từng là nhạn nhân của trò chơi này. Các nhóm hacker còn viết hẳn các script bot để tự đi tấn công dạo trên internet, vì vậy hãy luôn cẩn thận với sản phẩm của bạn.</p><h3 id="cơ-chế-khai-thác-và-tấn-công">Cơ chế khai thác và tấn công</h3><p>SQL Injection tấn công bằng cách gửi một mã lệnh SQL độc đến back-end của máy chủ cơ sở đữ liệu, thông qua các request của người dùng mà website cho phép. Bất kỳ input nào cũng có thể được sử dụng để gửi mã độc, tức là bao gồm cả: các thẻ <code>&lt;input&gt;</code> nhập liệu, query strings, cookies và file upload.</p><p>Mình sẽ có một ví dụ như sau: Giả sử đây là trang đăng nhập vào ngân hàng <strong>PankHub</strong>, với form đăng nhập gồm 2 fields là <code>email</code> và <code>password</code>:</p><img src="/assets/blog/sql-database-hacking/02.jpg"/><p>Bây giờ mình sẽ thử đăng nhập tài khoản của người dùng tên là <strong>Phát</strong> (jk, don&#x27;t panic) với <em>email</em> là: <code>phat.nhagiau@pankhub.com</code> và <em>password</em> là <code>password</code></p><img src="/assets/blog/sql-database-hacking/03.jpg"/><p>Ừ thì đương nhiên là không đăng nhập được rồi :okay: Đây là trường hợp giả sử mình là một attacker, và mình tình cờ địa được email của người dùng này sau khi đi ngang qua lúc nó đang đăng nhập vào ngân hàng ở tiệm net :smug: Victim của mình là một thằng đại gia nhà giàu, tiền không những được quy ra bằng vàng để trong két mà còn có cả một đống trong nhà băng. Xác định được mục tiêu thì trích xuất thông tin mục tiêu là điều cần thiết. Vì vậy mình chỉ thử đăng nhập cho vui thôi, đương nhiên làm gì có thằng <del>ngu</del> nào đặt mật khẩu là <code>password</code> cơ chứ (jk)</p><p>Bây giờ hãy nhìn vấn đề từ phía server log nhé, chúng ta sẽ có 1 cái logging như sau:</p><pre><code style="0:color: undefined">Rendering login page.
Checking supplied authentication details for phat.nhagiau@pankhub.com.
Finding user in database.
No such user, report this to the user (invalid credentials?).
Rendering login page.
</code></pre><p>Sau đó, mình tiếp tục truy thử login vào tài khoản của victim, nhưng lần này password mình sẽ thêm một <em>dấu nháy đơn</em> <code>&#x27;</code>, kết quả có được là:</p><img src="/assets/blog/sql-database-hacking/04.jpg"/><p>Thấy sự khác biệt rồi phải không? Thông thường, với những trường hợp sai thông tin đăng nhập sẽ luôn cho ra một message lỗi (trang nào nó random message thì bó tay), vì vậy có gì đó không đúng xảy ra rồi, có thể nguyên do là bởi dấu nháy đơn chăng?</p><p>Server log:</p><pre><code style="0:color: undefined">...

Rendering login page.
Checking supplied authentication details for phat.nhagiau@pankhub.com.
Finding user in database.
An error occurred: PG::SyntaxError: ERROR: unterminated quoted string at or near &quot;&#x27;password&#x27;&#x27; limit 1&quot; LINE 1: ...ers where email = &#x27;phat.nhagiau@pankhub.com&#x27; and password = &#x27;password&#x27;... ^ : select * from users where email = &#x27;phat.nhagiau@pankhub.com&#x27; and password = &#x27;password&#x27;&#x27; limit 1.
Unable to login this user due to unexpected error.
Rendering login page.
</code></pre><p>Nhìn thấy ở log hiển thị SQL syntax error chứ? Điều này chứng tỏ dấu nháy đơn chính là nguyên nhân gây ra lỗi. Thử ghép vào câu lệnh SQL được chạy trên server thì nó sẽ trông như thế này:</p><pre><code class="language-sql"><span style="color:#D73A49">SELECT</span><span style="color:#000000"> </span><span style="color:#D73A49">*</span>
<span style="color:#000000">  </span><span style="color:#D73A49">FROM</span><span style="color:#000000"> users</span>
<span style="color:#000000"> </span><span style="color:#D73A49">WHERE</span><span style="color:#000000"> email </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#22863A">&#x27;phat.nhagiau@pankhub.com&#x27;</span>
<span style="color:#000000">   </span><span style="color:#D73A49">AND</span><span style="color:#000000"> pass  </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#22863A">&#x27;password&#x27;&#x27; LIMIT 1</span>
</code></pre><p>Dư 1 dấu nháy đơn, câu lệnh này chạy trong SQL chắc chắn sẽ lỗi. Và đây chính là thứ gọi là <strong>SQL Injection</strong>.</p><p>Sau khi xác định được lỗ hổng, mình sẽ thử đăng nhập lại với password là <strong><code>&#x27; OR 1=1--</code></strong>. Câu lệnh SQL lúc này được thực thi trên server sẽ là:</p><pre><code class="language-sql"><span style="color:#D73A49">SELECT</span><span style="color:#000000"> </span><span style="color:#D73A49">*</span>
<span style="color:#000000">  </span><span style="color:#D73A49">FROM</span><span style="color:#000000"> users</span>
<span style="color:#000000"> </span><span style="color:#D73A49">WHERE</span><span style="color:#000000"> email </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#22863A">&#x27;phat.nhagiau@pankhub.com&#x27;</span>
<span style="color:#000000">   </span><span style="color:#D73A49">AND</span><span style="color:#000000"> pass  </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#22863A">&#x27;&#x27;</span><span style="color:#000000"> </span><span style="color:#D73A49">OR</span><span style="color:#000000"> </span><span style="color:#005CC5">1</span><span style="color:#D73A49">=</span><span style="color:#005CC5">1</span><span style="color:#000000"> </span><span style="color:#6A737D">--&#x27; LIMIT 1</span>
</code></pre><p>Server log:</p><pre><code style="0:color: undefined">Rendering login page.
Checking supplied authentication details for phat.nhagiau@pankhub.com.
Finding user in database.
Authentication details confirmed, establishing session for this user.
</code></pre><img src="/assets/blog/sql-database-hacking/05.jpg"/><p>Xong, tài khoản của bạn nằm trong tay tôi :ok:</p><p>Cơ chế hoạt động đơn giản nhất của <strong>SQL Injection</strong> là như vậy đọ. Thực thi nó không hề khó, nhưng để nhận ra được trang nào có lỗ hổng thì lại khá khó, vì không phải lúc nào khai thác lỗ hổng SQL Injection nó cũng y chang như vậy.</p><h3 id="nhưng-tại-sao-có-lỗ-hổng-này">Nhưng tại sao có lỗ hổng này?</h3><p>Lý do lớn nhất là các bạn chưa thể tiếp cận toàn bộ các case trong quá trình code. Bạn không bao giờ lường trước được người dùng sẽ làm cái <del>đéo</del> gì trên sản phẩm của mình. :sad: Chính vì vậy thường các case không bao giờ được nghĩ tới này lại vô tình tạo ra lỗ hổng cho attacker khai thác.</p><p>Khi viết các câu lệnh SQL trong source (ở đây mình sẽ lấy <strong>PHP</strong> làm ví dụ), đa số các bạn thường viết kiểu:</p><pre><code class="language-php"><span style="color:#000000">$query = &quot;SELECT * FROM USERS</span>
<span style="color:#000000">  WHERE email = &#x27;&quot; . $_POST[&#x27;email&#x27;] . &quot;&#x27;</span>
<span style="color:#000000">  AND password = &#x27;&quot; . $_POST[&#x27;password&#x27;] . &quot;&#x27;</span>
<span style="color:#000000">  LIMIT 1;&quot;</span>
<span style="color:#000000">$result = $connection-&gt;query($sql);</span>
</code></pre><p>Khi người dùng gửi request đăng nhập có thông tin, thì câu query trên sẽ tương đương với:</p><pre><code class="language-sql"><span style="color:#D73A49">SELECT</span><span style="color:#000000"> </span><span style="color:#D73A49">*</span>
<span style="color:#000000">  </span><span style="color:#D73A49">FROM</span><span style="color:#000000"> USERS</span>
<span style="color:#000000"> </span><span style="color:#D73A49">WHERE</span><span style="color:#000000"> email </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#22863A">&#x27;phat.nhagiau@pankhub.com&#x27;</span>
<span style="color:#000000">   </span><span style="color:#D73A49">AND</span><span style="color:#000000"> password </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#22863A">&#x27;password&#x27;</span><span style="color:#000000"> </span><span style="color:#D73A49">LIMIT</span><span style="color:#000000"> </span><span style="color:#005CC5">1</span>
</code></pre><p>Tức là cái gì gửi lên, thì param tương đương sẽ được thay thế bằng cái đó. Điều này vô tình tạo ra một lỗ hổng cực kỳ nguy hiểm. Nếu bạn từng học các môn liên quan tới database hoặc làm việc với database nhiều, các bạn có thể hiểu rằng chỉ với những câu lệnh SQL thôi cũng đủ để chúng làm bất cứ thứ gì liên quan tới dữ liệu.</p><p>Không những thế, SQL Injection còn có thể thực thi được mã HTML hoặc PHP trong nhiều trường hợp. Đó là lý do tại sao lỗ hổng này nghiêm trọng như vậy.</p><h3 id="chống-injection-như-thế-nào">Chống injection như thế nào?</h3><h4 id="truy-vấn-tham-số-parameterized-statements">Truy vấn tham số (Parameterized Statements)</h4><p>Đa số các ngôn ngữ lập trình hỗ trợ truy vấn SQL đều sẽ hỗ trợ chạy các câu lệnh SQL bằng cách tạo truy vấn để trích xuất các tham số khi cần thiết. Các câu lệnh nên được <em>tham số hoá</em> để đảm bảo rằng các <em>tham số</em> (tức là <em>dữ liệu đầu vào</em>) đưa vào câu lệnh SQL được xử lý một cách an toàn nhất.</p><p>Với ví dụ ở <a href="#nh%c6%b0ng-t%e1%ba%a1i-sao-c%c3%b3-l%e1%bb%97-h%e1%bb%95ng-n%c3%a0y">phần trên</a>, chúng ta sẽ thử đưa nó về dạng truy vấn tham số:</p><pre><code class="language-php"><span style="color:#000000">// Câu lệnh SQL chờ tham số</span>
<span style="color:#000000">$sql = &quot;SELECT * FROM USERS</span>
<span style="color:#000000">  WHERE email = ?</span>
<span style="color:#000000">  AND password = ?</span>
<span style="color:#000000">  LIMIT 1&quot;;</span>
<!-- -->
<span style="color:#000000">// Chuẩn bị và ràng buộc</span>
<span style="color:#000000">$stmt = $connection-&gt;prepare($sql);</span>
<span style="color:#000000">$stmt-&gt;bind_param(&quot;ss&quot;, $email, $password);</span>
<!-- -->
<span style="color:#000000">// Truyền tham số và thực thi</span>
<span style="color:#000000">$email = $_POST[&#x27;email&#x27;];</span>
<span style="color:#000000">$password = $_POST[&#x27;password&#x27;];</span>
<span style="color:#000000">$stmt-&gt;execute();</span>
<!-- -->
<span style="color:#000000">// Đừng quên close connection mỗi lần thực thi xong</span>
<span style="color:#000000">$stmt-&gt;close();</span>
<span style="color:#000000">$conn-&gt;close();</span>
</code></pre><p>Dạng <strong>bind</strong> param này chắc có lẽ sẽ khó để truyền tham số khi số lượng column cần dùng trong query trở nên nhiều hơn, vậy nên còn có cách như sau:</p><pre><code class="language-php"><span style="color:#000000">// Câu lệnh SQL chờ tham số</span>
<span style="color:#000000">$sql = &quot;SELECT * FROM USERS</span>
<span style="color:#000000">  WHERE email = :email</span>
<span style="color:#000000">  AND password = :password</span>
<span style="color:#000000">  LIMIT 1&quot;;</span>
<!-- -->
<span style="color:#000000">// Chuẩn bị và ràng buộc</span>
<span style="color:#000000">$stmt = $connection-&gt;prepare($sql);</span>
<span style="color:#000000">$stmt-&gt;bindParam(&quot;:email&quot;, $email);</span>
<span style="color:#000000">$stmt-&gt;bindParam(&quot;:password&quot;, $password);</span>
<!-- -->
<span style="color:#000000">// Truyền tham số và thực thi</span>
<span style="color:#000000">$email = $_POST[&#x27;email&#x27;];</span>
<span style="color:#000000">$password = $_POST[&#x27;password&#x27;];</span>
<span style="color:#000000">$stmt-&gt;execute();</span>
</code></pre><p>Ví dụ trong một số ngôn ngữ khác:</p><p><strong>C#</strong></p><pre><code class="language-csharp"><span style="color:#6A737D">// Create the SQL command.</span>
<span style="color:#D73A49">SqlCommand</span><span style="color:#000000"> command </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#D73A49">new</span><span style="color:#000000"> </span><span style="color:#D73A49">SqlCommand</span><span style="color:#000000">(</span><span style="color:#22863A">&quot;select * from users where email = @email&quot;</span><span style="color:#000000">, conn);</span>
<!-- -->
<span style="color:#6A737D">// Add the parameter values in separately.</span>
<span style="color:#000000">command.Parameters.</span><span style="color:#6F42C1">Add</span><span style="color:#000000">(</span><span style="color:#D73A49">new</span><span style="color:#000000"> </span><span style="color:#D73A49">SqlParameter</span><span style="color:#000000">(</span><span style="color:#22863A">&quot;email&quot;</span><span style="color:#000000">, email);</span>
<!-- -->
<span style="color:#6F42C1">using</span><span style="color:#000000"> (SqlDataReader reader </span><span style="color:#D73A49">=</span><span style="color:#000000"> command.</span><span style="color:#6F42C1">ExecuteReader</span><span style="color:#000000">())</span>
<span style="color:#000000">{</span>
<span style="color:#000000">  </span><span style="color:#6F42C1">while</span><span style="color:#000000"> (reader.</span><span style="color:#6F42C1">Read</span><span style="color:#000000">())</span>
<span style="color:#000000">  {</span>
<span style="color:#000000">    </span><span style="color:#6A737D">// Do something with the retrieved data.</span>
<span style="color:#000000">  }</span>
<span style="color:#000000">}</span>
</code></pre><p><strong>Django</strong></p><pre><code class="language-python"><span style="color:#6A737D"># Good</span>
<span style="color:#000000">Users.objects.</span><span style="color:#6F42C1">filter(email</span><span style="color:#D73A49">=</span><span style="color:#6F42C1">email)</span>
<!-- -->
<span style="color:#6A737D"># Good</span>
<span style="color:#000000">Users.objects.</span><span style="color:#6F42C1">raw(</span><span style="color:#22863A">&quot;select * from users where email = %s&quot;</span><span style="color:#6F42C1">, [email])</span>
<!-- -->
<span style="color:#6A737D"># Liable to got hacked</span>
<span style="color:#000000">Users.objects.</span><span style="color:#6F42C1">raw(</span><span style="color:#22863A">&quot;select * from users where email = &#x27;%s&#x27;&quot;</span><span style="color:#6F42C1"> </span><span style="color:#D73A49">%</span><span style="color:#6F42C1"> email)</span>
</code></pre><p><strong>Node</strong></p><pre><code class="language-js"><span style="color:#6A737D">// node-sql</span>
<span style="color:#D73A49">var</span><span style="color:#000000"> sql </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#005CC5">require</span><span style="color:#000000">(</span><span style="color:#22863A">&#x27;sql&#x27;</span><span style="color:#000000">);</span>
<span style="color:#D73A49">var</span><span style="color:#000000"> query </span><span style="color:#D73A49">=</span><span style="color:#000000"> user.</span><span style="color:#005CC5">select</span><span style="color:#000000">(user.</span><span style="color:#6F42C1">star</span><span style="color:#000000">()))</span>
<span style="color:#000000">                .</span><span style="color:#6F42C1">from</span><span style="color:#000000">(user)</span>
<span style="color:#000000">                .</span><span style="color:#6F42C1">where</span><span style="color:#000000">(user.email.</span><span style="color:#6F42C1">equals</span><span style="color:#000000">(email)).</span><span style="color:#6F42C1">toQuery</span><span style="color:#000000">();</span>
<!-- -->
<span style="color:#6A737D">// mysql</span>
<span style="color:#D73A49">var</span><span style="color:#000000"> mysql </span><span style="color:#D73A49">=</span><span style="color:#000000"> </span><span style="color:#005CC5">require</span><span style="color:#000000">(</span><span style="color:#22863A">&#x27;mysql&#x27;</span><span style="color:#000000">);</span>
<span style="color:#D73A49">var</span><span style="color:#000000"> connection </span><span style="color:#D73A49">=</span><span style="color:#000000"> mysql.</span><span style="color:#6F42C1">createConnection</span><span style="color:#000000">({ host</span><span style="color:#D73A49">:</span><span style="color:#000000"> HOST, user</span><span style="color:#D73A49">:</span><span style="color:#000000"> USERNAME, password</span><span style="color:#D73A49">:</span><span style="color:#000000"> PASSWORD });</span>
<span style="color:#000000">connection.</span><span style="color:#6F42C1">connect</span><span style="color:#000000">();</span>
<!-- -->
<span style="color:#000000">connection.</span><span style="color:#6F42C1">query</span><span style="color:#000000">(</span>
<span style="color:#000000">  </span><span style="color:#22863A">&#x27;select * from users where email = ?&#x27;</span><span style="color:#000000">,</span>
<span style="color:#000000">  [email],</span>
<span style="color:#000000">  </span><span style="color:#D73A49">function</span><span style="color:#000000">(err, rows, fields) {</span>
<span style="color:#000000">    </span><span style="color:#6A737D">// Do something with the retrieved data.</span>
<span style="color:#000000">  });</span>
<!-- -->
<span style="color:#000000">connection.</span><span style="color:#6F42C1">end</span><span style="color:#000000">();</span>
</code></pre><h4 id="hãy-validation-từ-front-end-cho-tới-back-end">Hãy validation từ Front-end cho tới Back-end</h4><p><strong>Validation</strong> dữ liệu chưa bao giờ là công việc thú vị :okay: tuy nhiên việc validation 2 bước giúp bảo mật tốt hơn, và đồng thời cũng tránh được các lỗi lặt vặt không cần thiết.</p><p>Ví dụ trên front-end các field nhập vào dữ liệu số, nên dùng input <code>number</code> thay vì input <code>text</code>. Các field bắt buộc thì nên <code>required</code>. Mặc dù trên front-end có thể verify dữ liệu đầu vào, nhưng attacker vẫn có thể ignore những rule này để trực tiếp gửi dữ liệu vào back-end, vậy nên trên back-end chúng ta nên verify lại dữ liệu, như kiểu <code>$age = (int)$_POST[&#x27;age&#x27;]</code>. Điều này sẽ tránh được các yếu tố gây ra lỗi không đáng có.</p><h4 id="phân-quyền-quản-trị">Phân quyền quản trị</h4><p>Mình thấy rất nhiều bạn khi xây dựng project, thường sử dụng tài khoản <strong><code>root</code></strong> của DBMS để làm tất cả mọi thứ... Đó là một sai lầm cực kỳ lớn. Phần lớn các bạn đều chưa hiểu mức độ nghiêm trọng của vấn đề này, vấn đề này giải thích cũng khó hiểu, phải trong trường hợp thực tế các bạn học được thì dễ nhớ hơn.</p><p>Tuy nhiên mình vẫn sẽ đưa ra một ví dụ đơn giản như sau:</p><p>Khi bạn đăng nhập, việc cần làm của database chỉ là vào đọc dữ liệu (quyền <strong>READ</strong>) để verify thông tin. Trong khi các bạn lại cấp full quyền cho <strong>user</strong> của DBMS chỉ dùng để đọc... Giả sử form đăng nhập trên hệ thống có lỗ hổng SQL Injection, thì việc attack từ cái form login xoá toàn bộ dữ liệu của bạn là điều cực kỳ đơn giản, còn nếu user tương tác với database chỉ có quyền đọc, thì attacker cũng chỉ có thể truy cập tài khoản đó mà thôi.</p><p>Nghĩa là bạn chỉ gặp một nguy cơ nhỏ hơn so với cái nguy cơ cực kỳ khủng khiếp kia.</p><p>Đó, không phải tự dưng mà <strong>Oracle</strong> được cho là hệ quản trị database SQL bảo mật nhất, lý do là vì phân quyền của <strong>Oracle</strong> cực kỳ chặt chẽ. Do đó, tốt nhất nên phân quyền cho các user trong DBMS một cách chặt chẽ và hợp lý, để tránh hối hận về lâu về dài.</p><p>Vấn đề phân quyền không phải chỉ ở trong DBMS, mà còn ở trong cả hệ thống, và cấu hình <strong>server</strong>. Nhắc lại lần nữa: <strong>Phân quyền cực kỳ quan trọng</strong></p><img title="chmod 777 and you will see" alt="chmod 777 and you will see" src="/assets/blog/sql-database-hacking/06.jpg"/><h2 id="kết-luận">Kết luận</h2><p>SQL Injection không phải một vấn đề mới mẻ, nó tồn tại cả một thập kỷ rồi nhưng nó vẫn đứng đầu bảng xếp hạng về các lỗ hổng nguy hiểm nhất trong nhiều năm liền. Chỉ với một vài bước dễ dàng, hệ thống của bạn có thể bị tê liệt hoàn toàn... Chống thì khó, mà phá thì dễ lắm.</p><p>Nên nhớ:</p><blockquote><p>Đạo cao một thước, ma cao một trượng.</p></blockquote></div></div></article></div></main><nav class="w-full h-16 bg-white border-t border-mid-gray select-none fixed bottom-0 left-0 tablet:hidden"><div class="flex justify-between w-full max-w-sm px-2 mx-auto"><a href="/"><div class="flex flex-col items-center justify-center w-16 h-16 relative text-black"><svg width="20" height="20" class="fill-current" stroke-width="1.5"><use xlink:href="/assets/icons.svg#undefined"></use></svg><span class="mt-1 text-xs font-semibold tracking-wide">Home</span></div></a><a href="/blog"><div class="flex flex-col items-center justify-center w-16 h-16 relative text-primary"><svg width="20" height="20" class="fill-current" stroke-width="1.5"><use xlink:href="/assets/icons.svg#undefined"></use></svg><span class="mt-1 text-xs font-semibold tracking-wide">Blog</span></div></a><a href="/about"><div class="flex flex-col items-center justify-center w-16 h-16 relative text-black"><svg width="20" height="20" class="fill-current" stroke-width="1.5"><use xlink:href="/assets/icons.svg#undefined"></use></svg><span class="mt-1 text-xs font-semibold tracking-wide">About</span></div></a><a href="https://github.com/monodyle" target="_blank" rel="noopener noreferrer"><div class="flex flex-col items-center justify-center w-16 h-16 relative text-black"><svg width="20" height="20" class="fill-current" stroke-width="1.5"><use xlink:href="/assets/icons.svg#undefined"></use></svg><span class="mt-1 text-xs font-semibold tracking-wide">GitHub</span></div></a></div></nav></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"mdxSource":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"H\\xF4m n\\u1ECD m\\xECnh v\\u1EEBa \\u0111\\u1ECDc \\u0111\\u01B0\\u1EE3c m\\u1ED9t b\\xE0i write-up c\\u1EE7a m\\u1ED9t b\\u1EA1n white-hat sau khi b\\xE1o c\\xE1o l\\u1EA1i l\\u1ED7 h\\u1ED5ng SQL Injection tr\\xEAn trang web c\\u1EE7a \\u0110\\u1EA1i h\\u1ECDc Harvard, t\\u1EF1 d\\u01B0ng th\\u1EA5y k\\u1EF9 n\\u0103ng v\\u1EC1 b\\u1EA3o m\\u1EADt c\\u1EE7a m\\xECnh bao l\\xE2u nay... k\\xE9m gh\\xEA.\"), mdx(\"p\", null, \"B\\u1EA3n th\\xE2n l\\xE0 sinh vi\\xEAn chuy\\xEAn ng\\xE0nh \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"H\\u1EC7 Th\\u1ED1ng Th\\xF4ng Tin\"), \", t\\u1EE9c l\\xE0 chuy\\xEAn ng\\u1ED3i \\u0111\\u1EA5u v\\u1EADt v\\u1EDBi m\\u1EA5y c\\xE1i c\\u01A1 s\\u1EDF d\\u1EEF li\\u1EC7u m\\xE0 l\\u1EA1i r\\u1EA5t hay qu\\xEAn \\u0111i nh\\u1EEFng c\\xE1i quan tr\\u1ECDng nh\\u01B0 th\\u1EBF n\\xE0y... C\\u1EA3m th\\u1EA5y x\\u1EA5u h\\u1ED5, th\\u1EBF l\\xE0 m\\xECnh ph\\u1EA3i m\\xF2 l\\u1EA1i nh\\u1EEFng g\\xEC m\\xECnh \\u0111\\xE3 h\\u1ECDc, nh\\u01B0ng kh\\xF4ng d\\xF9ng t\\u1EDBi l\\u1EA1i qu\\xEAn m\\u1EA5t, r\\u1ED3i vi\\u1EBFt th\\xE0nh m\\u1ED9t blog \\u0111\\u1EC3 coi nh\\u01B0 v\\u1EEBa h\\u1ECDc l\\u1EA1i, v\\u1EEBa chia s\\u1EBB ki\\u1EBFn th\\u1EE9c cho m\\u1ECDi ng\\u01B0\\u1EDDi :smug: \", mdx(\"del\", {\n    parentName: \"p\"\n  }, \"M\\xECnh th\\u1EADt tuy\\u1EC7t\")), mdx(\"h2\", {\n    \"id\": \"thằng-chó-mày-hack-web-bố-mày\"\n  }, \"Th\\u1EB1ng ch\\xF3, m\\xE0y hack web b\\u1ED1 m\\xE0y...\"), mdx(\"p\", null, \"H\\xE8 v\\u1EEBa r\\u1ED3i m\\xECnh c\\xF3 tr\\xF2 chuy\\u1EC7n v\\u1EDBi m\\u1ED9t \\xF4ng anh trong ngh\\u1EC1, \\u1ED5ng t\\xE2m s\\u1EF1 v\\u1EC1 chuy\\u1EC7n b\\u1ECB th\\u1EB1ng n\\xE0o th\\u1EA3 bot n\\xF3 clean m\\u1EB9 c\\xE1i database, \\u0111\\u1EC3 l\\u1EA1i \\u0111\\xFAng m\\u1ED9t d\\xF2ng duy nh\\u1EA5t:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"G\\u1EEDi b\\u1ED1 m\\xE0y v\\xE0i Bitcoin \\u0111\\xEA, b\\u1ED1 m\\xE0y tr\\u1EA3 l\\u1EA1i d\\u1EEF li\\u1EC7u cho... :lookdown:\")), mdx(\"p\", null, \"V\\xE0 k\\xE8m theo \\u0111\\xF3 l\\xE0 \\u0111\\u1ECBa ch\\u1EC9 v\\xED bitcoin c\\u1EE7a h\\u1EAFn :surrender: T\\xEDnh \\xF4ng anh m\\xECnh \\u0111\\u01B0\\u1EE3c c\\xE1i th\\u1EADt th\\xE0, nh\\xE0 c\\u0169ng kh\\xF4ng c\\xF3 g\\xEC ngo\\xE0i \\u0111i\\u1EC1u ki\\u1EC7n, th\\u1EBF l\\xE0 g\\u1EEDi cho n\\xF3 v\\xE0i bitcoin coi nh\\u01B0 ti\\u1EC1n \\u0103n s\\xE1ng, h\\xF4m sau th\\u1EA5y n\\xF3 restore l\\u1EA1i d\\u1EEF li\\u1EC7u th\\u1EADt :mokas:\"), mdx(\"p\", null, \"Nh\\u01B0ng m\\xE0 t\\u1EE9c qu\\xE1, ai \\u0111\\u1EDDi l\\xE0m l\\u1EADp tr\\xECnh c\\xF3 s\\u1EA3n ph\\u1EA9m \\u0111ang ch\\u1EA1y ph\\xE0 ph\\xE0 l\\u1EA1i c\\xF3 th\\u1EB1ng cho\\xE1 n\\xE0o hack, ngh\\u0129 c\\xF3 cay kh\\xF4ng c\\u01A1 ch\\u1EE9? :yikes:\"), mdx(\"p\", null, \"M\\xECnh kh\\xF4ng r\\xF5 l\\xE0 c\\xE1i database \\u0111\\xF3 b\\u1ECB hack nh\\u01B0 th\\u1EBF n\\xE0o, nh\\u01B0ng kh\\xE1 ch\\u1EAFc ch\\u1EAFn ph\\u1EA7n l\\u1EDBn l\\xE0 b\\u1EDFi v\\xEC code ch\\u01B0a \\u0111\\u1EE7 b\\u1EA3o m\\u1EADt v\\xE0 c\\xF3 nhi\\u1EC1u l\\u1ED7 h\\u1ED5ng. C\\xE1c hacker s\\u1EBD vi\\u1EBFt m\\u1ED9t con bot chuy\\xEAn \\u0111i d\\u1EA1o tr\\xEAn m\\u1EA1ng \\u0111\\u1EC3 attack v\\xE0o nh\\u1EEFng case b\\u1EA3o m\\u1EADt th\\u01B0\\u1EDDng d\\u1EC5 b\\u1ECB hack nh\\u1EA5t.\"), mdx(\"p\", null, \"V\\xEC v\\u1EADy b\\xE0i vi\\u1EBFt n\\xE0y m\\xECnh s\\u1EBD gi\\u1EDBi thi\\u1EC7u cho c\\xE1c b\\u1EA1n m\\u1ED9t lo\\u1EA1i l\\u1ED7 h\\u1ED5ng \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"c\\u01A1 b\\u1EA3n\"), \" nh\\u01B0ng c\\u1EF1c k\\u1EF3 nguy hi\\u1EC3m, gi\\u1EA3i th\\xEDch c\\u01A1 ch\\u1EBF v\\xE0 h\\u01B0\\u1EDBng d\\u1EABn c\\xE1ch ph\\xF2ng ch\\u1ED1ng. V\\xE0 xin gi\\u1EDBi thi\\u1EC7u c\\xE1i tr\\xF2 g\\u1ECDi l\\xE0 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SQL Injection\"), \".\"), mdx(\"div\", {\n    className: \"note\",\n    emoji: \"1\"\n  }, mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"L\\u01B0u \\xFD:\")), mdx(\"p\", null, \"B\\xE0i vi\\u1EBFt n\\xE0y nh\\u1EB1m m\\u1EE5c \\u0111\\xEDch giao l\\u01B0u k\\u1EF9 n\\u0103ng b\\u1EA3o m\\u1EADt l\\u1EADp tr\\xECnh, kh\\xF4ng c\\u1ED5 su\\xFD c\\xE1c b\\u1EA1n \\u0111i ph\\xE1 l\\xE0ng ph\\xE1 x\\xF3m. H\\xE3y t\\u1EC9nh t\\xE1o :smug:\")), mdx(\"h2\", {\n    \"id\": \"nhập-môn-hack-cơ-sở-dữ-liệu-sql\"\n  }, \"Nh\\u1EADp m\\xF4n hack C\\u01A1 s\\u1EDF d\\u1EEF li\\u1EC7u SQL\"), mdx(\"p\", null, \"Trong nhi\\u1EC1u lo\\u1EA1i t\\u1EA5n c\\xF4ng l\\u1ED7 h\\u1ED5ng nh\\u1EB1m v\\xE0o website, t\\u1EA5n c\\xF4ng \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SQL Injection\"), \" l\\xE0 m\\u1ED9t trong nh\\u1EEFng lo\\u1EA1i nguy hi\\u1EC3m v\\xE0 ph\\u1ED5 bi\\u1EBFn nh\\u1EA5t. N\\xF3 \\u0111\\xE3 t\\u1EEBng g\\xE2y ra nhi\\u1EC1u thi\\u1EC7t h\\u1EA1i \\u0111\\xE1ng k\\u1EC3 cho nhi\\u1EC1u doanh nghi\\u1EC7p v\\xE0 t\\u1ED5 ch\\u1EE9c trong r\\u1EA5t nhi\\u1EC1u n\\u0103m, v\\xE0 \\u0111\\u01B0\\u01A1ng nhi\\xEAn s\\u1EBD c\\xF2n ti\\u1EBFp di\\u1EC5n trong t\\u01B0\\u01A1ng lai.\"), mdx(\"img\", {\n    title: \"SQL Injection l\\xE0 g\\xEC??\",\n    alt: \"SQL Injection l\\xE0 g\\xEC??\",\n    src: \"/blog/sql-database-hacking/draw-01.jpg\"\n  }), mdx(\"p\", null, \"Theo \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vi.wikipedia.org/wiki/SQL_injection\"\n  }), \"Wikipedia\"), \" :popcorn::\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SQL injection\"), \" l\\xE0 m\\u1ED9t k\\u1EF9 thu\\u1EADt cho ph\\xE9p nh\\u1EEFng k\\u1EBB t\\u1EA5n c\\xF4ng l\\u1EE3i d\\u1EE5ng l\\u1ED7 h\\u1ED5ng c\\u1EE7a vi\\u1EC7c ki\\u1EC3m tra d\\u1EEF li\\u1EC7u \\u0111\\u1EA7u v\\xE0o trong c\\xE1c \\u1EE9ng d\\u1EE5ng web v\\xE0 c\\xE1c th\\xF4ng b\\xE1o l\\u1ED7i c\\u1EE7a h\\u1EC7 qu\\u1EA3n tr\\u1ECB c\\u01A1 s\\u1EDF d\\u1EEF li\\u1EC7u tr\\u1EA3 v\\u1EC1 \\u0111\\u1EC3 \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"inject\"), \" (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ti\\xEAm v\\xE0o\"), \") v\\xE0 thi h\\xE0nh c\\xE1c c\\xE2u l\\u1EC7nh SQL \", mdx(\"u\", null, \"b\\u1EA5t h\\u1EE3p ph\\xE1p\"), \".\")), mdx(\"p\", null, \"\\u1EDC th\\xEC kh\\xE1i ni\\u1EC7m nh\\u01B0 v\\u1EADy \\u0111\\u1EA5y, hi\\u1EC3u m\\u1ED9t c\\xE1ch \\u0111\\u01A1n gi\\u1EA3n t\\u1EE9c l\\xE0 lo\\u1EA1i t\\u1EA5n c\\xF4ng n\\xE0y nh\\u1EB1m v\\xE0o c\\xE1c \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"input\"), \" c\\xF3 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"t\\u01B0\\u01A1ng t\\xE1c tr\\u1EF1c ti\\u1EBFp\"), \" v\\u1EDBi \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"database\"), \" \\u1EDF \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"back-end\"), \" (v\\xED d\\u1EE5 nh\\u01B0 c\\xE1c input email, password \\u1EDF form login). Th\\xF4ng th\\u01B0\\u1EDDng, attacker s\\u1EBD t\\u1EA5n c\\xF4ng \\u0111\\u1EC3 \\u0103n c\\u1EAFp d\\u1EEF li\\u1EC7u, lo\\u1EA1i n\\xE0y v\\u1EC1 c\\u01A1 b\\u1EA3n l\\xE0 hi\\u1EC1n nh\\u1EA5t, sau \\u0111\\xF3 t\\u1EDBi x\\xE1o tr\\u1ED9n d\\u1EEF li\\u1EC7u \\u0111\\u1EC3 c\\u1EA3n tr\\u1EDF s\\u1EF1 ho\\u1EA1t \\u0111\\u1ED9ng c\\u1EE7a website, v\\xE0 tr\\u01B0\\u1EDDng h\\u1EE3p x\\u1EA5u nh\\u1EA5t, l\\xE0 quy\\u1EC1n truy c\\u1EADp qu\\u1EA3n tr\\u1ECB v\\xE0o m\\xE1y ch\\u1EE7 database b\\u1ECB chi\\u1EBFm. :moka:\"), mdx(\"p\", null, \"Trong l\\u1ECBch s\\u1EED, \\u0111\\xE3 c\\xF3 r\\u1EA5t nhi\\u1EC1u \\u0111\\u1EE3t t\\u1EA5n c\\xF4ng SQL Injection nh\\u1EB1m m\\u1EE5c \\u0111\\xEDch:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Tr\\xEDch xu\\u1EA5t th\\xF4ng tin nh\\u1EA1y c\\u1EA3m, v\\xED d\\u1EE5 nh\\u01B0 v\\u1EC1 an sinh x\\xE3 h\\u1ED9i, hay th\\xF4ng tin th\\u1EBB t\\xEDn d\\u1EE5ng\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Tr\\xEDch xu\\u1EA5t th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c \\u0111\\u0103ng k\\xFD tr\\xEAn c\\xE1c website, \\u1EDF Vi\\u1EC7t Nam c\\u0169ng kh\\xF4ng \\xEDt tr\\u01B0\\u1EDDng h\\u1EE3p\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Xo\\xE1 lu\\xF4n c\\xE1i database, c\\xF3 r\\u1EA5t nhi\\u1EC1u trang web kh\\xF4ng s\\u1EED d\\u1EE5ng backup d\\u1EEF li\\u1EC7u, v\\xE0 khi b\\u1ECB xo\\xE1 th\\xEC coi nh\\u01B0 c\\u1EA3 h\\u1EC7 th\\u1ED1ng t\\xEA li\\u1EC7t, v\\xED d\\u1EE5 c\\u1EE7a \\xF4ng anh b\\xEAn tr\\xEAn l\\xE0 v\\xED d\\u1EE5 g\\u1EA7n g\\u0169i nh\\u1EA5t\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Ti\\xEAm m\\xE3 \\u0111\\u1ED9c th\\u1EF1c thi v\\xE0o trang web khi ng\\u01B0\\u1EDDi d\\xF9ng truy c\\u1EADp\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Nh\\u1EAFc l\\u1EA1i m\\u1ED9t l\\u1EA7n n\\u1EEFa:\"), \" T\\u1EA5n c\\xF4ng v\\u1EC1 SQL Injection c\\u1EF1c k\\u1EF3 ph\\u1ED5 bi\\u1EBFn. C\\xE1c c\\xF4ng ty l\\u1EDBn nh\\u01B0 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Yahoo\"), \" hay \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Sony\"), \" \\u0111\\xE3 t\\u1EEBng l\\xE0 nh\\u1EA1n nh\\xE2n c\\u1EE7a tr\\xF2 ch\\u01A1i n\\xE0y. C\\xE1c nh\\xF3m hacker c\\xF2n vi\\u1EBFt h\\u1EB3n c\\xE1c script bot \\u0111\\u1EC3 t\\u1EF1 \\u0111i t\\u1EA5n c\\xF4ng d\\u1EA1o tr\\xEAn internet, v\\xEC v\\u1EADy h\\xE3y lu\\xF4n c\\u1EA9n th\\u1EADn v\\u1EDBi s\\u1EA3n ph\\u1EA9m c\\u1EE7a b\\u1EA1n.\"), mdx(\"h3\", {\n    \"id\": \"cơ-chế-khai-thác-và-tấn-công\"\n  }, \"C\\u01A1 ch\\u1EBF khai th\\xE1c v\\xE0 t\\u1EA5n c\\xF4ng\"), mdx(\"p\", null, \"SQL Injection t\\u1EA5n c\\xF4ng b\\u1EB1ng c\\xE1ch g\\u1EEDi m\\u1ED9t m\\xE3 l\\u1EC7nh SQL \\u0111\\u1ED9c \\u0111\\u1EBFn back-end c\\u1EE7a m\\xE1y ch\\u1EE7 c\\u01A1 s\\u1EDF \\u0111\\u1EEF li\\u1EC7u, th\\xF4ng qua c\\xE1c request c\\u1EE7a ng\\u01B0\\u1EDDi d\\xF9ng m\\xE0 website cho ph\\xE9p. B\\u1EA5t k\\u1EF3 input n\\xE0o c\\u0169ng c\\xF3 th\\u1EC3 \\u0111\\u01B0\\u1EE3c s\\u1EED d\\u1EE5ng \\u0111\\u1EC3 g\\u1EEDi m\\xE3 \\u0111\\u1ED9c, t\\u1EE9c l\\xE0 bao g\\u1ED3m c\\u1EA3: c\\xE1c th\\u1EBB \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\u003cinput\u003e\"), \" nh\\u1EADp li\\u1EC7u, query strings, cookies v\\xE0 file upload.\"), mdx(\"p\", null, \"M\\xECnh s\\u1EBD c\\xF3 m\\u1ED9t v\\xED d\\u1EE5 nh\\u01B0 sau: Gi\\u1EA3 s\\u1EED \\u0111\\xE2y l\\xE0 trang \\u0111\\u0103ng nh\\u1EADp v\\xE0o ng\\xE2n h\\xE0ng \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PankHub\"), \", v\\u1EDBi form \\u0111\\u0103ng nh\\u1EADp g\\u1ED3m 2 fields l\\xE0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"email\"), \" v\\xE0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"password\"), \":\"), mdx(\"img\", {\n    src: \"/assets/blog/sql-database-hacking/02.jpg\"\n  }), mdx(\"p\", null, \"B\\xE2y gi\\u1EDD m\\xECnh s\\u1EBD th\\u1EED \\u0111\\u0103ng nh\\u1EADp t\\xE0i kho\\u1EA3n c\\u1EE7a ng\\u01B0\\u1EDDi d\\xF9ng t\\xEAn l\\xE0 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Ph\\xE1t\"), \" (jk, don't panic) v\\u1EDBi \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"email\"), \" l\\xE0: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"phat.nhagiau@pankhub.com\"), \" v\\xE0 \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"password\"), \" l\\xE0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"password\")), mdx(\"img\", {\n    src: \"/assets/blog/sql-database-hacking/03.jpg\"\n  }), mdx(\"p\", null, \"\\u1EEA th\\xEC \\u0111\\u01B0\\u01A1ng nhi\\xEAn l\\xE0 kh\\xF4ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u01B0\\u1EE3c r\\u1ED3i :okay: \\u0110\\xE2y l\\xE0 tr\\u01B0\\u1EDDng h\\u1EE3p gi\\u1EA3 s\\u1EED m\\xECnh l\\xE0 m\\u1ED9t attacker, v\\xE0 m\\xECnh t\\xECnh c\\u1EDD \\u0111\\u1ECBa \\u0111\\u01B0\\u1EE3c email c\\u1EE7a ng\\u01B0\\u1EDDi d\\xF9ng n\\xE0y sau khi \\u0111i ngang qua l\\xFAc n\\xF3 \\u0111ang \\u0111\\u0103ng nh\\u1EADp v\\xE0o ng\\xE2n h\\xE0ng \\u1EDF ti\\u1EC7m net :smug: Victim c\\u1EE7a m\\xECnh l\\xE0 m\\u1ED9t th\\u1EB1ng \\u0111\\u1EA1i gia nh\\xE0 gi\\xE0u, ti\\u1EC1n kh\\xF4ng nh\\u1EEFng \\u0111\\u01B0\\u1EE3c quy ra b\\u1EB1ng v\\xE0ng \\u0111\\u1EC3 trong k\\xE9t m\\xE0 c\\xF2n c\\xF3 c\\u1EA3 m\\u1ED9t \\u0111\\u1ED1ng trong nh\\xE0 b\\u0103ng. X\\xE1c \\u0111\\u1ECBnh \\u0111\\u01B0\\u1EE3c m\\u1EE5c ti\\xEAu th\\xEC tr\\xEDch xu\\u1EA5t th\\xF4ng tin m\\u1EE5c ti\\xEAu l\\xE0 \\u0111i\\u1EC1u c\\u1EA7n thi\\u1EBFt. V\\xEC v\\u1EADy m\\xECnh ch\\u1EC9 th\\u1EED \\u0111\\u0103ng nh\\u1EADp cho vui th\\xF4i, \\u0111\\u01B0\\u01A1ng nhi\\xEAn l\\xE0m g\\xEC c\\xF3 th\\u1EB1ng \", mdx(\"del\", {\n    parentName: \"p\"\n  }, \"ngu\"), \" n\\xE0o \\u0111\\u1EB7t m\\u1EADt kh\\u1EA9u l\\xE0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"password\"), \" c\\u01A1 ch\\u1EE9 (jk)\"), mdx(\"p\", null, \"B\\xE2y gi\\u1EDD h\\xE3y nh\\xECn v\\u1EA5n \\u0111\\u1EC1 t\\u1EEB ph\\xEDa server log nh\\xE9, ch\\xFAng ta s\\u1EBD c\\xF3 1 c\\xE1i logging nh\\u01B0 sau:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"style\": [\"color: undefined\"]\n  }), \"Rendering login page.\\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\\nFinding user in database.\\nNo such user, report this to the user (invalid credentials?).\\nRendering login page.\\n\")), mdx(\"p\", null, \"Sau \\u0111\\xF3, m\\xECnh ti\\u1EBFp t\\u1EE5c truy th\\u1EED login v\\xE0o t\\xE0i kho\\u1EA3n c\\u1EE7a victim, nh\\u01B0ng l\\u1EA7n n\\xE0y password m\\xECnh s\\u1EBD th\\xEAm m\\u1ED9t \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"d\\u1EA5u nh\\xE1y \\u0111\\u01A1n\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'\"), \", k\\u1EBFt qu\\u1EA3 c\\xF3 \\u0111\\u01B0\\u1EE3c l\\xE0:\"), mdx(\"img\", {\n    src: \"/assets/blog/sql-database-hacking/04.jpg\"\n  }), mdx(\"p\", null, \"Th\\u1EA5y s\\u1EF1 kh\\xE1c bi\\u1EC7t r\\u1ED3i ph\\u1EA3i kh\\xF4ng? Th\\xF4ng th\\u01B0\\u1EDDng, v\\u1EDBi nh\\u1EEFng tr\\u01B0\\u1EDDng h\\u1EE3p sai th\\xF4ng tin \\u0111\\u0103ng nh\\u1EADp s\\u1EBD lu\\xF4n cho ra m\\u1ED9t message l\\u1ED7i (trang n\\xE0o n\\xF3 random message th\\xEC b\\xF3 tay), v\\xEC v\\u1EADy c\\xF3 g\\xEC \\u0111\\xF3 kh\\xF4ng \\u0111\\xFAng x\\u1EA3y ra r\\u1ED3i, c\\xF3 th\\u1EC3 nguy\\xEAn do l\\xE0 b\\u1EDFi d\\u1EA5u nh\\xE1y \\u0111\\u01A1n ch\\u0103ng?\"), mdx(\"p\", null, \"Server log:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"style\": [\"color: undefined\"]\n  }), \"...\\n\\nRendering login page.\\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\\nFinding user in database.\\nAn error occurred: PG::SyntaxError: ERROR: unterminated quoted string at or near \\\"'password'' limit 1\\\" LINE 1: ...ers where email = 'phat.nhagiau@pankhub.com' and password = 'password'... ^ : select * from users where email = 'phat.nhagiau@pankhub.com' and password = 'password'' limit 1.\\nUnable to login this user due to unexpected error.\\nRendering login page.\\n\")), mdx(\"p\", null, \"Nh\\xECn th\\u1EA5y \\u1EDF log hi\\u1EC3n th\\u1ECB SQL syntax error ch\\u1EE9? \\u0110i\\u1EC1u n\\xE0y ch\\u1EE9ng t\\u1ECF d\\u1EA5u nh\\xE1y \\u0111\\u01A1n ch\\xEDnh l\\xE0 nguy\\xEAn nh\\xE2n g\\xE2y ra l\\u1ED7i. Th\\u1EED gh\\xE9p v\\xE0o c\\xE2u l\\u1EC7nh SQL \\u0111\\u01B0\\u1EE3c ch\\u1EA1y tr\\xEAn server th\\xEC n\\xF3 s\\u1EBD tr\\xF4ng nh\\u01B0 th\\u1EBF n\\xE0y:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"SELECT\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"*\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"FROM\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" users\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"WHERE\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" email \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"'phat.nhagiau@pankhub.com'\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"   \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"AND\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" pass  \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"'password'' LIMIT 1\"), \"\\n\")), mdx(\"p\", null, \"D\\u01B0 1 d\\u1EA5u nh\\xE1y \\u0111\\u01A1n, c\\xE2u l\\u1EC7nh n\\xE0y ch\\u1EA1y trong SQL ch\\u1EAFc ch\\u1EAFn s\\u1EBD l\\u1ED7i. V\\xE0 \\u0111\\xE2y ch\\xEDnh l\\xE0 th\\u1EE9 g\\u1ECDi l\\xE0 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SQL Injection\"), \".\"), mdx(\"p\", null, \"Sau khi x\\xE1c \\u0111\\u1ECBnh \\u0111\\u01B0\\u1EE3c l\\u1ED7 h\\u1ED5ng, m\\xECnh s\\u1EBD th\\u1EED \\u0111\\u0103ng nh\\u1EADp l\\u1EA1i v\\u1EDBi password l\\xE0 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"' OR 1=1--\")), \". C\\xE2u l\\u1EC7nh SQL l\\xFAc n\\xE0y \\u0111\\u01B0\\u1EE3c th\\u1EF1c thi tr\\xEAn server s\\u1EBD l\\xE0:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"SELECT\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"*\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"FROM\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" users\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"WHERE\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" email \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"'phat.nhagiau@pankhub.com'\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"   \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"AND\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" pass  \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"''\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"OR\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#005CC5\"\n    }\n  }), \"1\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#005CC5\"\n    }\n  }), \"1\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"--' LIMIT 1\"), \"\\n\")), mdx(\"p\", null, \"Server log:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"style\": [\"color: undefined\"]\n  }), \"Rendering login page.\\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\\nFinding user in database.\\nAuthentication details confirmed, establishing session for this user.\\n\")), mdx(\"img\", {\n    src: \"/assets/blog/sql-database-hacking/05.jpg\"\n  }), mdx(\"p\", null, \"Xong, t\\xE0i kho\\u1EA3n c\\u1EE7a b\\u1EA1n n\\u1EB1m trong tay t\\xF4i :ok:\"), mdx(\"p\", null, \"C\\u01A1 ch\\u1EBF ho\\u1EA1t \\u0111\\u1ED9ng \\u0111\\u01A1n gi\\u1EA3n nh\\u1EA5t c\\u1EE7a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SQL Injection\"), \" l\\xE0 nh\\u01B0 v\\u1EADy \\u0111\\u1ECD. Th\\u1EF1c thi n\\xF3 kh\\xF4ng h\\u1EC1 kh\\xF3, nh\\u01B0ng \\u0111\\u1EC3 nh\\u1EADn ra \\u0111\\u01B0\\u1EE3c trang n\\xE0o c\\xF3 l\\u1ED7 h\\u1ED5ng th\\xEC l\\u1EA1i kh\\xE1 kh\\xF3, v\\xEC kh\\xF4ng ph\\u1EA3i l\\xFAc n\\xE0o khai th\\xE1c l\\u1ED7 h\\u1ED5ng SQL Injection n\\xF3 c\\u0169ng y chang nh\\u01B0 v\\u1EADy.\"), mdx(\"h3\", {\n    \"id\": \"nhưng-tại-sao-có-lỗ-hổng-này\"\n  }, \"Nh\\u01B0ng t\\u1EA1i sao c\\xF3 l\\u1ED7 h\\u1ED5ng n\\xE0y?\"), mdx(\"p\", null, \"L\\xFD do l\\u1EDBn nh\\u1EA5t l\\xE0 c\\xE1c b\\u1EA1n ch\\u01B0a th\\u1EC3 ti\\u1EBFp c\\u1EADn to\\xE0n b\\u1ED9 c\\xE1c case trong qu\\xE1 tr\\xECnh code. B\\u1EA1n kh\\xF4ng bao gi\\u1EDD l\\u01B0\\u1EDDng tr\\u01B0\\u1EDBc \\u0111\\u01B0\\u1EE3c ng\\u01B0\\u1EDDi d\\xF9ng s\\u1EBD l\\xE0m c\\xE1i \", mdx(\"del\", {\n    parentName: \"p\"\n  }, \"\\u0111\\xE9o\"), \" g\\xEC tr\\xEAn s\\u1EA3n ph\\u1EA9m c\\u1EE7a m\\xECnh. :sad: Ch\\xEDnh v\\xEC v\\u1EADy th\\u01B0\\u1EDDng c\\xE1c case kh\\xF4ng bao gi\\u1EDD \\u0111\\u01B0\\u1EE3c ngh\\u0129 t\\u1EDBi n\\xE0y l\\u1EA1i v\\xF4 t\\xECnh t\\u1EA1o ra l\\u1ED7 h\\u1ED5ng cho attacker khai th\\xE1c.\"), mdx(\"p\", null, \"Khi vi\\u1EBFt c\\xE1c c\\xE2u l\\u1EC7nh SQL trong source (\\u1EDF \\u0111\\xE2y m\\xECnh s\\u1EBD l\\u1EA5y \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PHP\"), \" l\\xE0m v\\xED d\\u1EE5), \\u0111a s\\u1ED1 c\\xE1c b\\u1EA1n th\\u01B0\\u1EDDng vi\\u1EBFt ki\\u1EC3u:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$query = \\\"SELECT * FROM USERS\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  WHERE email = '\\\" . $_POST['email'] . \\\"'\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  AND password = '\\\" . $_POST['password'] . \\\"'\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  LIMIT 1;\\\"\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$result = $connection-\u003equery($sql);\"), \"\\n\")), mdx(\"p\", null, \"Khi ng\\u01B0\\u1EDDi d\\xF9ng g\\u1EEDi request \\u0111\\u0103ng nh\\u1EADp c\\xF3 th\\xF4ng tin, th\\xEC c\\xE2u query tr\\xEAn s\\u1EBD t\\u01B0\\u01A1ng \\u0111\\u01B0\\u01A1ng v\\u1EDBi:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"SELECT\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"*\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"FROM\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" USERS\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"WHERE\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" email \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"'phat.nhagiau@pankhub.com'\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"   \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"AND\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" password \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"'password'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"LIMIT\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#005CC5\"\n    }\n  }), \"1\"), \"\\n\")), mdx(\"p\", null, \"T\\u1EE9c l\\xE0 c\\xE1i g\\xEC g\\u1EEDi l\\xEAn, th\\xEC param t\\u01B0\\u01A1ng \\u0111\\u01B0\\u01A1ng s\\u1EBD \\u0111\\u01B0\\u1EE3c thay th\\u1EBF b\\u1EB1ng c\\xE1i \\u0111\\xF3. \\u0110i\\u1EC1u n\\xE0y v\\xF4 t\\xECnh t\\u1EA1o ra m\\u1ED9t l\\u1ED7 h\\u1ED5ng c\\u1EF1c k\\u1EF3 nguy hi\\u1EC3m. N\\u1EBFu b\\u1EA1n t\\u1EEBng h\\u1ECDc c\\xE1c m\\xF4n li\\xEAn quan t\\u1EDBi database ho\\u1EB7c l\\xE0m vi\\u1EC7c v\\u1EDBi database nhi\\u1EC1u, c\\xE1c b\\u1EA1n c\\xF3 th\\u1EC3 hi\\u1EC3u r\\u1EB1ng ch\\u1EC9 v\\u1EDBi nh\\u1EEFng c\\xE2u l\\u1EC7nh SQL th\\xF4i c\\u0169ng \\u0111\\u1EE7 \\u0111\\u1EC3 ch\\xFAng l\\xE0m b\\u1EA5t c\\u1EE9 th\\u1EE9 g\\xEC li\\xEAn quan t\\u1EDBi d\\u1EEF li\\u1EC7u.\"), mdx(\"p\", null, \"Kh\\xF4ng nh\\u1EEFng th\\u1EBF, SQL Injection c\\xF2n c\\xF3 th\\u1EC3 th\\u1EF1c thi \\u0111\\u01B0\\u1EE3c m\\xE3 HTML ho\\u1EB7c PHP trong nhi\\u1EC1u tr\\u01B0\\u1EDDng h\\u1EE3p. \\u0110\\xF3 l\\xE0 l\\xFD do t\\u1EA1i sao l\\u1ED7 h\\u1ED5ng n\\xE0y nghi\\xEAm tr\\u1ECDng nh\\u01B0 v\\u1EADy.\"), mdx(\"h3\", {\n    \"id\": \"chống-injection-như-thế-nào\"\n  }, \"Ch\\u1ED1ng injection nh\\u01B0 th\\u1EBF n\\xE0o?\"), mdx(\"h4\", {\n    \"id\": \"truy-vấn-tham-số-parameterized-statements\"\n  }, \"Truy v\\u1EA5n tham s\\u1ED1 (Parameterized Statements)\"), mdx(\"p\", null, \"\\u0110a s\\u1ED1 c\\xE1c ng\\xF4n ng\\u1EEF l\\u1EADp tr\\xECnh h\\u1ED7 tr\\u1EE3 truy v\\u1EA5n SQL \\u0111\\u1EC1u s\\u1EBD h\\u1ED7 tr\\u1EE3 ch\\u1EA1y c\\xE1c c\\xE2u l\\u1EC7nh SQL b\\u1EB1ng c\\xE1ch t\\u1EA1o truy v\\u1EA5n \\u0111\\u1EC3 tr\\xEDch xu\\u1EA5t c\\xE1c tham s\\u1ED1 khi c\\u1EA7n thi\\u1EBFt. C\\xE1c c\\xE2u l\\u1EC7nh n\\xEAn \\u0111\\u01B0\\u1EE3c \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"tham s\\u1ED1 ho\\xE1\"), \" \\u0111\\u1EC3 \\u0111\\u1EA3m b\\u1EA3o r\\u1EB1ng c\\xE1c \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"tham s\\u1ED1\"), \" (t\\u1EE9c l\\xE0 \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"d\\u1EEF li\\u1EC7u \\u0111\\u1EA7u v\\xE0o\"), \") \\u0111\\u01B0a v\\xE0o c\\xE2u l\\u1EC7nh SQL \\u0111\\u01B0\\u1EE3c x\\u1EED l\\xFD m\\u1ED9t c\\xE1ch an to\\xE0n nh\\u1EA5t.\"), mdx(\"p\", null, \"V\\u1EDBi v\\xED d\\u1EE5 \\u1EDF \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#nh%c6%b0ng-t%e1%ba%a1i-sao-c%c3%b3-l%e1%bb%97-h%e1%bb%95ng-n%c3%a0y\"\n  }), \"ph\\u1EA7n tr\\xEAn\"), \", ch\\xFAng ta s\\u1EBD th\\u1EED \\u0111\\u01B0a n\\xF3 v\\u1EC1 d\\u1EA1ng truy v\\u1EA5n tham s\\u1ED1:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"// C\\xE2u l\\u1EC7nh SQL ch\\u1EDD tham s\\u1ED1\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$sql = \\\"SELECT * FROM USERS\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  WHERE email = ?\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  AND password = ?\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  LIMIT 1\\\";\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"// Chu\\u1EA9n b\\u1ECB v\\xE0 r\\xE0ng bu\\u1ED9c\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$stmt = $connection-\u003eprepare($sql);\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$stmt-\u003ebind_param(\\\"ss\\\", $email, $password);\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"// Truy\\u1EC1n tham s\\u1ED1 v\\xE0 th\\u1EF1c thi\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$email = $_POST['email'];\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$password = $_POST['password'];\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$stmt-\u003eexecute();\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"// \\u0110\\u1EEBng qu\\xEAn close connection m\\u1ED7i l\\u1EA7n th\\u1EF1c thi xong\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$stmt-\u003eclose();\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$conn-\u003eclose();\"), \"\\n\")), mdx(\"p\", null, \"D\\u1EA1ng \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"bind\"), \" param n\\xE0y ch\\u1EAFc c\\xF3 l\\u1EBD s\\u1EBD kh\\xF3 \\u0111\\u1EC3 truy\\u1EC1n tham s\\u1ED1 khi s\\u1ED1 l\\u01B0\\u1EE3ng column c\\u1EA7n d\\xF9ng trong query tr\\u1EDF n\\xEAn nhi\\u1EC1u h\\u01A1n, v\\u1EADy n\\xEAn c\\xF2n c\\xF3 c\\xE1ch nh\\u01B0 sau:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"// C\\xE2u l\\u1EC7nh SQL ch\\u1EDD tham s\\u1ED1\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$sql = \\\"SELECT * FROM USERS\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  WHERE email = :email\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  AND password = :password\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  LIMIT 1\\\";\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"// Chu\\u1EA9n b\\u1ECB v\\xE0 r\\xE0ng bu\\u1ED9c\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$stmt = $connection-\u003eprepare($sql);\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$stmt-\u003ebindParam(\\\":email\\\", $email);\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$stmt-\u003ebindParam(\\\":password\\\", $password);\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"// Truy\\u1EC1n tham s\\u1ED1 v\\xE0 th\\u1EF1c thi\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$email = $_POST['email'];\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$password = $_POST['password'];\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"$stmt-\u003eexecute();\"), \"\\n\")), mdx(\"p\", null, \"V\\xED d\\u1EE5 trong m\\u1ED9t s\\u1ED1 ng\\xF4n ng\\u1EEF kh\\xE1c:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"C#\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"// Create the SQL command.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"SqlCommand\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" command \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"new\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"SqlCommand\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"\\\"select * from users where email = @email\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \", conn);\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"// Add the parameter values in separately.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"command.Parameters.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"Add\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"new\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"SqlParameter\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"\\\"email\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \", email);\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"using\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" (SqlDataReader reader \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" command.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"ExecuteReader\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"())\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"{\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"while\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" (reader.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"Read\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"())\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  {\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"    \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"// Do something with the retrieved data.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  }\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"}\"), \"\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Django\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-python\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"# Good\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"Users.objects.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"filter(email\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"email)\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"# Good\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"Users.objects.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"raw(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"\\\"select * from users where email = %s\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \", [email])\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"# Liable to got hacked\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"Users.objects.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"raw(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"\\\"select * from users where email = '%s'\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"%\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \" email)\"), \"\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Node\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"// node-sql\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"var\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" sql \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#005CC5\"\n    }\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"'sql'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \");\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"var\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" query \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" user.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#005CC5\"\n    }\n  }), \"select\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(user.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"star\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"()))\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"                .\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"from\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(user)\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"                .\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"where\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(user.email.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"equals\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(email)).\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"toQuery\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"();\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"// mysql\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"var\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" mysql \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#005CC5\"\n    }\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"'mysql'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \");\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"var\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" connection \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"=\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" mysql.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"createConnection\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"({ host\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" HOST, user\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" USERNAME, password\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \" PASSWORD });\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"connection.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"connect\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"();\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"connection.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"query\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#22863A\"\n    }\n  }), \"'select * from users where email = ?'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \",\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  [email],\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#D73A49\"\n    }\n  }), \"function\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"(err, rows, fields) {\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"    \"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6A737D\"\n    }\n  }), \"// Do something with the retrieved data.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"  });\"), \"\\n\", \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"connection.\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#6F42C1\"\n    }\n  }), \"end\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"style\": {\n      \"color\": \"#000000\"\n    }\n  }), \"();\"), \"\\n\")), mdx(\"h4\", {\n    \"id\": \"hãy-validation-từ-front-end-cho-tới-back-end\"\n  }, \"H\\xE3y validation t\\u1EEB Front-end cho t\\u1EDBi Back-end\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Validation\"), \" d\\u1EEF li\\u1EC7u ch\\u01B0a bao gi\\u1EDD l\\xE0 c\\xF4ng vi\\u1EC7c th\\xFA v\\u1ECB :okay: tuy nhi\\xEAn vi\\u1EC7c validation 2 b\\u01B0\\u1EDBc gi\\xFAp b\\u1EA3o m\\u1EADt t\\u1ED1t h\\u01A1n, v\\xE0 \\u0111\\u1ED3ng th\\u1EDDi c\\u0169ng tr\\xE1nh \\u0111\\u01B0\\u1EE3c c\\xE1c l\\u1ED7i l\\u1EB7t v\\u1EB7t kh\\xF4ng c\\u1EA7n thi\\u1EBFt.\"), mdx(\"p\", null, \"V\\xED d\\u1EE5 tr\\xEAn front-end c\\xE1c field nh\\u1EADp v\\xE0o d\\u1EEF li\\u1EC7u s\\u1ED1, n\\xEAn d\\xF9ng input \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"number\"), \" thay v\\xEC input \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"text\"), \". C\\xE1c field b\\u1EAFt bu\\u1ED9c th\\xEC n\\xEAn \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"required\"), \". M\\u1EB7c d\\xF9 tr\\xEAn front-end c\\xF3 th\\u1EC3 verify d\\u1EEF li\\u1EC7u \\u0111\\u1EA7u v\\xE0o, nh\\u01B0ng attacker v\\u1EABn c\\xF3 th\\u1EC3 ignore nh\\u1EEFng rule n\\xE0y \\u0111\\u1EC3 tr\\u1EF1c ti\\u1EBFp g\\u1EEDi d\\u1EEF li\\u1EC7u v\\xE0o back-end, v\\u1EADy n\\xEAn tr\\xEAn back-end ch\\xFAng ta n\\xEAn verify l\\u1EA1i d\\u1EEF li\\u1EC7u, nh\\u01B0 ki\\u1EC3u \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"$age = (int)$_POST['age']\"), \". \\u0110i\\u1EC1u n\\xE0y s\\u1EBD tr\\xE1nh \\u0111\\u01B0\\u1EE3c c\\xE1c y\\u1EBFu t\\u1ED1 g\\xE2y ra l\\u1ED7i kh\\xF4ng \\u0111\\xE1ng c\\xF3.\"), mdx(\"h4\", {\n    \"id\": \"phân-quyền-quản-trị\"\n  }, \"Ph\\xE2n quy\\u1EC1n qu\\u1EA3n tr\\u1ECB\"), mdx(\"p\", null, \"M\\xECnh th\\u1EA5y r\\u1EA5t nhi\\u1EC1u b\\u1EA1n khi x\\xE2y d\\u1EF1ng project, th\\u01B0\\u1EDDng s\\u1EED d\\u1EE5ng t\\xE0i kho\\u1EA3n \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"root\")), \" c\\u1EE7a DBMS \\u0111\\u1EC3 l\\xE0m t\\u1EA5t c\\u1EA3 m\\u1ECDi th\\u1EE9... \\u0110\\xF3 l\\xE0 m\\u1ED9t sai l\\u1EA7m c\\u1EF1c k\\u1EF3 l\\u1EDBn. Ph\\u1EA7n l\\u1EDBn c\\xE1c b\\u1EA1n \\u0111\\u1EC1u ch\\u01B0a hi\\u1EC3u m\\u1EE9c \\u0111\\u1ED9 nghi\\xEAm tr\\u1ECDng c\\u1EE7a v\\u1EA5n \\u0111\\u1EC1 n\\xE0y, v\\u1EA5n \\u0111\\u1EC1 n\\xE0y gi\\u1EA3i th\\xEDch c\\u0169ng kh\\xF3 hi\\u1EC3u, ph\\u1EA3i trong tr\\u01B0\\u1EDDng h\\u1EE3p th\\u1EF1c t\\u1EBF c\\xE1c b\\u1EA1n h\\u1ECDc \\u0111\\u01B0\\u1EE3c th\\xEC d\\u1EC5 nh\\u1EDB h\\u01A1n.\"), mdx(\"p\", null, \"Tuy nhi\\xEAn m\\xECnh v\\u1EABn s\\u1EBD \\u0111\\u01B0a ra m\\u1ED9t v\\xED d\\u1EE5 \\u0111\\u01A1n gi\\u1EA3n nh\\u01B0 sau:\"), mdx(\"p\", null, \"Khi b\\u1EA1n \\u0111\\u0103ng nh\\u1EADp, vi\\u1EC7c c\\u1EA7n l\\xE0m c\\u1EE7a database ch\\u1EC9 l\\xE0 v\\xE0o \\u0111\\u1ECDc d\\u1EEF li\\u1EC7u (quy\\u1EC1n \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"READ\"), \") \\u0111\\u1EC3 verify th\\xF4ng tin. Trong khi c\\xE1c b\\u1EA1n l\\u1EA1i c\\u1EA5p full quy\\u1EC1n cho \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"user\"), \" c\\u1EE7a DBMS ch\\u1EC9 d\\xF9ng \\u0111\\u1EC3 \\u0111\\u1ECDc... Gi\\u1EA3 s\\u1EED form \\u0111\\u0103ng nh\\u1EADp tr\\xEAn h\\u1EC7 th\\u1ED1ng c\\xF3 l\\u1ED7 h\\u1ED5ng SQL Injection, th\\xEC vi\\u1EC7c attack t\\u1EEB c\\xE1i form login xo\\xE1 to\\xE0n b\\u1ED9 d\\u1EEF li\\u1EC7u c\\u1EE7a b\\u1EA1n l\\xE0 \\u0111i\\u1EC1u c\\u1EF1c k\\u1EF3 \\u0111\\u01A1n gi\\u1EA3n, c\\xF2n n\\u1EBFu user t\\u01B0\\u01A1ng t\\xE1c v\\u1EDBi database ch\\u1EC9 c\\xF3 quy\\u1EC1n \\u0111\\u1ECDc, th\\xEC attacker c\\u0169ng ch\\u1EC9 c\\xF3 th\\u1EC3 truy c\\u1EADp t\\xE0i kho\\u1EA3n \\u0111\\xF3 m\\xE0 th\\xF4i.\"), mdx(\"p\", null, \"Ngh\\u0129a l\\xE0 b\\u1EA1n ch\\u1EC9 g\\u1EB7p m\\u1ED9t nguy c\\u01A1 nh\\u1ECF h\\u01A1n so v\\u1EDBi c\\xE1i nguy c\\u01A1 c\\u1EF1c k\\u1EF3 kh\\u1EE7ng khi\\u1EBFp kia.\"), mdx(\"p\", null, \"\\u0110\\xF3, kh\\xF4ng ph\\u1EA3i t\\u1EF1 d\\u01B0ng m\\xE0 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Oracle\"), \" \\u0111\\u01B0\\u1EE3c cho l\\xE0 h\\u1EC7 qu\\u1EA3n tr\\u1ECB database SQL b\\u1EA3o m\\u1EADt nh\\u1EA5t, l\\xFD do l\\xE0 v\\xEC ph\\xE2n quy\\u1EC1n c\\u1EE7a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Oracle\"), \" c\\u1EF1c k\\u1EF3 ch\\u1EB7t ch\\u1EBD. Do \\u0111\\xF3, t\\u1ED1t nh\\u1EA5t n\\xEAn ph\\xE2n quy\\u1EC1n cho c\\xE1c user trong DBMS m\\u1ED9t c\\xE1ch ch\\u1EB7t ch\\u1EBD v\\xE0 h\\u1EE3p l\\xFD, \\u0111\\u1EC3 tr\\xE1nh h\\u1ED1i h\\u1EADn v\\u1EC1 l\\xE2u v\\u1EC1 d\\xE0i.\"), mdx(\"p\", null, \"V\\u1EA5n \\u0111\\u1EC1 ph\\xE2n quy\\u1EC1n kh\\xF4ng ph\\u1EA3i ch\\u1EC9 \\u1EDF trong DBMS, m\\xE0 c\\xF2n \\u1EDF trong c\\u1EA3 h\\u1EC7 th\\u1ED1ng, v\\xE0 c\\u1EA5u h\\xECnh \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"server\"), \". Nh\\u1EAFc l\\u1EA1i l\\u1EA7n n\\u1EEFa: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Ph\\xE2n quy\\u1EC1n c\\u1EF1c k\\u1EF3 quan tr\\u1ECDng\")), mdx(\"img\", {\n    title: \"chmod 777 and you will see\",\n    alt: \"chmod 777 and you will see\",\n    src: \"/assets/blog/sql-database-hacking/06.jpg\"\n  }), mdx(\"h2\", {\n    \"id\": \"kết-luận\"\n  }, \"K\\u1EBFt lu\\u1EADn\"), mdx(\"p\", null, \"SQL Injection kh\\xF4ng ph\\u1EA3i m\\u1ED9t v\\u1EA5n \\u0111\\u1EC1 m\\u1EDBi m\\u1EBB, n\\xF3 t\\u1ED3n t\\u1EA1i c\\u1EA3 m\\u1ED9t th\\u1EADp k\\u1EF7 r\\u1ED3i nh\\u01B0ng n\\xF3 v\\u1EABn \\u0111\\u1EE9ng \\u0111\\u1EA7u b\\u1EA3ng x\\u1EBFp h\\u1EA1ng v\\u1EC1 c\\xE1c l\\u1ED7 h\\u1ED5ng nguy hi\\u1EC3m nh\\u1EA5t trong nhi\\u1EC1u n\\u0103m li\\u1EC1n. Ch\\u1EC9 v\\u1EDBi m\\u1ED9t v\\xE0i b\\u01B0\\u1EDBc d\\u1EC5 d\\xE0ng, h\\u1EC7 th\\u1ED1ng c\\u1EE7a b\\u1EA1n c\\xF3 th\\u1EC3 b\\u1ECB t\\xEA li\\u1EC7t ho\\xE0n to\\xE0n... Ch\\u1ED1ng th\\xEC kh\\xF3, m\\xE0 ph\\xE1 th\\xEC d\\u1EC5 l\\u1EAFm.\"), mdx(\"p\", null, \"N\\xEAn nh\\u1EDB:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u0110\\u1EA1o cao m\\u1ED9t th\\u01B0\\u1EDBc, ma cao m\\u1ED9t tr\\u01B0\\u1EE3ng.\")));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eHôm nọ mình vừa đọc được một bài write-up của một bạn white-hat sau khi báo cáo lại lỗ hổng SQL Injection trên trang web của Đại học Harvard, tự dưng thấy kỹ năng về bảo mật của mình bao lâu nay... kém ghê.\u003c/p\u003e\u003cp\u003eBản thân là sinh viên chuyên ngành \u003cstrong\u003eHệ Thống Thông Tin\u003c/strong\u003e, tức là chuyên ngồi đấu vật với mấy cái cơ sở dữ liệu mà lại rất hay quên đi những cái quan trọng như thế này... Cảm thấy xấu hổ, thế là mình phải mò lại những gì mình đã học, nhưng không dùng tới lại quên mất, rồi viết thành một blog để coi như vừa học lại, vừa chia sẻ kiến thức cho mọi người :smug: \u003cdel\u003eMình thật tuyệt\u003c/del\u003e\u003c/p\u003e\u003ch2 id=\"thằng-chó-mày-hack-web-bố-mày\"\u003eThằng chó, mày hack web bố mày...\u003c/h2\u003e\u003cp\u003eHè vừa rồi mình có trò chuyện với một ông anh trong nghề, ổng tâm sự về chuyện bị thằng nào thả bot nó clean mẹ cái database, để lại đúng một dòng duy nhất:\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eGửi bố mày vài Bitcoin đê, bố mày trả lại dữ liệu cho... :lookdown:\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003eVà kèm theo đó là địa chỉ ví bitcoin của hắn :surrender: Tính ông anh mình được cái thật thà, nhà cũng không có gì ngoài điều kiện, thế là gửi cho nó vài bitcoin coi như tiền ăn sáng, hôm sau thấy nó restore lại dữ liệu thật :mokas:\u003c/p\u003e\u003cp\u003eNhưng mà tức quá, ai đời làm lập trình có sản phẩm đang chạy phà phà lại có thằng choá nào hack, nghĩ có cay không cơ chứ? :yikes:\u003c/p\u003e\u003cp\u003eMình không rõ là cái database đó bị hack như thế nào, nhưng khá chắc chắn phần lớn là bởi vì code chưa đủ bảo mật và có nhiều lỗ hổng. Các hacker sẽ viết một con bot chuyên đi dạo trên mạng để attack vào những case bảo mật thường dễ bị hack nhất.\u003c/p\u003e\u003cp\u003eVì vậy bài viết này mình sẽ giới thiệu cho các bạn một loại lỗ hổng \u003cstrong\u003ecơ bản\u003c/strong\u003e nhưng cực kỳ nguy hiểm, giải thích cơ chế và hướng dẫn cách phòng chống. Và xin giới thiệu cái trò gọi là \u003cstrong\u003eSQL Injection\u003c/strong\u003e.\u003c/p\u003e\u003cdiv class=\"note\" emoji=\"1\"\u003e\u003cp\u003e\u003cstrong\u003eLưu ý:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eBài viết này nhằm mục đích giao lưu kỹ năng bảo mật lập trình, không cổ suý các bạn đi phá làng phá xóm. Hãy tỉnh táo :smug:\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"nhập-môn-hack-cơ-sở-dữ-liệu-sql\"\u003eNhập môn hack Cơ sở dữ liệu SQL\u003c/h2\u003e\u003cp\u003eTrong nhiều loại tấn công lỗ hổng nhằm vào website, tấn công \u003cstrong\u003eSQL Injection\u003c/strong\u003e là một trong những loại nguy hiểm và phổ biến nhất. Nó đã từng gây ra nhiều thiệt hại đáng kể cho nhiều doanh nghiệp và tổ chức trong rất nhiều năm, và đương nhiên sẽ còn tiếp diễn trong tương lai.\u003c/p\u003e\u003cimg title=\"SQL Injection là gì??\" alt=\"SQL Injection là gì??\" src=\"/blog/sql-database-hacking/draw-01.jpg\"/\u003e\u003cp\u003eTheo \u003ca href=\"https://vi.wikipedia.org/wiki/SQL_injection\"\u003eWikipedia\u003c/a\u003e :popcorn::\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003e\u003cstrong\u003eSQL injection\u003c/strong\u003e là một kỹ thuật cho phép những kẻ tấn công lợi dụng lỗ hổng của việc kiểm tra dữ liệu đầu vào trong các ứng dụng web và các thông báo lỗi của hệ quản trị cơ sở dữ liệu trả về để \u003cem\u003einject\u003c/em\u003e (\u003cem\u003etiêm vào\u003c/em\u003e) và thi hành các câu lệnh SQL \u003cu\u003ebất hợp pháp\u003c/u\u003e.\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003eỜ thì khái niệm như vậy đấy, hiểu một cách đơn giản tức là loại tấn công này nhằm vào các \u003cstrong\u003einput\u003c/strong\u003e có \u003cstrong\u003etương tác trực tiếp\u003c/strong\u003e với \u003cstrong\u003edatabase\u003c/strong\u003e ở \u003cstrong\u003eback-end\u003c/strong\u003e (ví dụ như các input email, password ở form login). Thông thường, attacker sẽ tấn công để ăn cắp dữ liệu, loại này về cơ bản là hiền nhất, sau đó tới xáo trộn dữ liệu để cản trở sự hoạt động của website, và trường hợp xấu nhất, là quyền truy cập quản trị vào máy chủ database bị chiếm. :moka:\u003c/p\u003e\u003cp\u003eTrong lịch sử, đã có rất nhiều đợt tấn công SQL Injection nhằm mục đích:\u003c/p\u003e\u003cul\u003e\u003cli\u003eTrích xuất thông tin nhạy cảm, ví dụ như về an sinh xã hội, hay thông tin thẻ tín dụng\u003c/li\u003e\u003cli\u003eTrích xuất thông tin người dùng đã được đăng ký trên các website, ở Việt Nam cũng không ít trường hợp\u003c/li\u003e\u003cli\u003eXoá luôn cái database, có rất nhiều trang web không sử dụng backup dữ liệu, và khi bị xoá thì coi như cả hệ thống tê liệt, ví dụ của ông anh bên trên là ví dụ gần gũi nhất\u003c/li\u003e\u003cli\u003eTiêm mã độc thực thi vào trang web khi người dùng truy cập\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003eNhắc lại một lần nữa:\u003c/strong\u003e Tấn công về SQL Injection cực kỳ phổ biến. Các công ty lớn như \u003cstrong\u003eYahoo\u003c/strong\u003e hay \u003cstrong\u003eSony\u003c/strong\u003e đã từng là nhạn nhân của trò chơi này. Các nhóm hacker còn viết hẳn các script bot để tự đi tấn công dạo trên internet, vì vậy hãy luôn cẩn thận với sản phẩm của bạn.\u003c/p\u003e\u003ch3 id=\"cơ-chế-khai-thác-và-tấn-công\"\u003eCơ chế khai thác và tấn công\u003c/h3\u003e\u003cp\u003eSQL Injection tấn công bằng cách gửi một mã lệnh SQL độc đến back-end của máy chủ cơ sở đữ liệu, thông qua các request của người dùng mà website cho phép. Bất kỳ input nào cũng có thể được sử dụng để gửi mã độc, tức là bao gồm cả: các thẻ \u003ccode\u003e\u0026lt;input\u0026gt;\u003c/code\u003e nhập liệu, query strings, cookies và file upload.\u003c/p\u003e\u003cp\u003eMình sẽ có một ví dụ như sau: Giả sử đây là trang đăng nhập vào ngân hàng \u003cstrong\u003ePankHub\u003c/strong\u003e, với form đăng nhập gồm 2 fields là \u003ccode\u003eemail\u003c/code\u003e và \u003ccode\u003epassword\u003c/code\u003e:\u003c/p\u003e\u003cimg src=\"/assets/blog/sql-database-hacking/02.jpg\"/\u003e\u003cp\u003eBây giờ mình sẽ thử đăng nhập tài khoản của người dùng tên là \u003cstrong\u003ePhát\u003c/strong\u003e (jk, don\u0026#x27;t panic) với \u003cem\u003eemail\u003c/em\u003e là: \u003ccode\u003ephat.nhagiau@pankhub.com\u003c/code\u003e và \u003cem\u003epassword\u003c/em\u003e là \u003ccode\u003epassword\u003c/code\u003e\u003c/p\u003e\u003cimg src=\"/assets/blog/sql-database-hacking/03.jpg\"/\u003e\u003cp\u003eỪ thì đương nhiên là không đăng nhập được rồi :okay: Đây là trường hợp giả sử mình là một attacker, và mình tình cờ địa được email của người dùng này sau khi đi ngang qua lúc nó đang đăng nhập vào ngân hàng ở tiệm net :smug: Victim của mình là một thằng đại gia nhà giàu, tiền không những được quy ra bằng vàng để trong két mà còn có cả một đống trong nhà băng. Xác định được mục tiêu thì trích xuất thông tin mục tiêu là điều cần thiết. Vì vậy mình chỉ thử đăng nhập cho vui thôi, đương nhiên làm gì có thằng \u003cdel\u003engu\u003c/del\u003e nào đặt mật khẩu là \u003ccode\u003epassword\u003c/code\u003e cơ chứ (jk)\u003c/p\u003e\u003cp\u003eBây giờ hãy nhìn vấn đề từ phía server log nhé, chúng ta sẽ có 1 cái logging như sau:\u003c/p\u003e\u003cpre\u003e\u003ccode style=\"0:color: undefined\"\u003eRendering login page.\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\nFinding user in database.\nNo such user, report this to the user (invalid credentials?).\nRendering login page.\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSau đó, mình tiếp tục truy thử login vào tài khoản của victim, nhưng lần này password mình sẽ thêm một \u003cem\u003edấu nháy đơn\u003c/em\u003e \u003ccode\u003e\u0026#x27;\u003c/code\u003e, kết quả có được là:\u003c/p\u003e\u003cimg src=\"/assets/blog/sql-database-hacking/04.jpg\"/\u003e\u003cp\u003eThấy sự khác biệt rồi phải không? Thông thường, với những trường hợp sai thông tin đăng nhập sẽ luôn cho ra một message lỗi (trang nào nó random message thì bó tay), vì vậy có gì đó không đúng xảy ra rồi, có thể nguyên do là bởi dấu nháy đơn chăng?\u003c/p\u003e\u003cp\u003eServer log:\u003c/p\u003e\u003cpre\u003e\u003ccode style=\"0:color: undefined\"\u003e...\n\nRendering login page.\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\nFinding user in database.\nAn error occurred: PG::SyntaxError: ERROR: unterminated quoted string at or near \u0026quot;\u0026#x27;password\u0026#x27;\u0026#x27; limit 1\u0026quot; LINE 1: ...ers where email = \u0026#x27;phat.nhagiau@pankhub.com\u0026#x27; and password = \u0026#x27;password\u0026#x27;... ^ : select * from users where email = \u0026#x27;phat.nhagiau@pankhub.com\u0026#x27; and password = \u0026#x27;password\u0026#x27;\u0026#x27; limit 1.\nUnable to login this user due to unexpected error.\nRendering login page.\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNhìn thấy ở log hiển thị SQL syntax error chứ? Điều này chứng tỏ dấu nháy đơn chính là nguyên nhân gây ra lỗi. Thử ghép vào câu lệnh SQL được chạy trên server thì nó sẽ trông như thế này:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan style=\"color:#D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e*\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e users\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e email \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;phat.nhagiau@pankhub.com\u0026#x27;\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e   \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e pass  \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;password\u0026#x27;\u0026#x27; LIMIT 1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eDư 1 dấu nháy đơn, câu lệnh này chạy trong SQL chắc chắn sẽ lỗi. Và đây chính là thứ gọi là \u003cstrong\u003eSQL Injection\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eSau khi xác định được lỗ hổng, mình sẽ thử đăng nhập lại với password là \u003cstrong\u003e\u003ccode\u003e\u0026#x27; OR 1=1--\u003c/code\u003e\u003c/strong\u003e. Câu lệnh SQL lúc này được thực thi trên server sẽ là:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan style=\"color:#D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e*\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e users\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e email \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;phat.nhagiau@pankhub.com\u0026#x27;\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e   \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e pass  \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eOR\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#6A737D\"\u003e--\u0026#x27; LIMIT 1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eServer log:\u003c/p\u003e\u003cpre\u003e\u003ccode style=\"0:color: undefined\"\u003eRendering login page.\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\nFinding user in database.\nAuthentication details confirmed, establishing session for this user.\n\u003c/code\u003e\u003c/pre\u003e\u003cimg src=\"/assets/blog/sql-database-hacking/05.jpg\"/\u003e\u003cp\u003eXong, tài khoản của bạn nằm trong tay tôi :ok:\u003c/p\u003e\u003cp\u003eCơ chế hoạt động đơn giản nhất của \u003cstrong\u003eSQL Injection\u003c/strong\u003e là như vậy đọ. Thực thi nó không hề khó, nhưng để nhận ra được trang nào có lỗ hổng thì lại khá khó, vì không phải lúc nào khai thác lỗ hổng SQL Injection nó cũng y chang như vậy.\u003c/p\u003e\u003ch3 id=\"nhưng-tại-sao-có-lỗ-hổng-này\"\u003eNhưng tại sao có lỗ hổng này?\u003c/h3\u003e\u003cp\u003eLý do lớn nhất là các bạn chưa thể tiếp cận toàn bộ các case trong quá trình code. Bạn không bao giờ lường trước được người dùng sẽ làm cái \u003cdel\u003eđéo\u003c/del\u003e gì trên sản phẩm của mình. :sad: Chính vì vậy thường các case không bao giờ được nghĩ tới này lại vô tình tạo ra lỗ hổng cho attacker khai thác.\u003c/p\u003e\u003cp\u003eKhi viết các câu lệnh SQL trong source (ở đây mình sẽ lấy \u003cstrong\u003ePHP\u003c/strong\u003e làm ví dụ), đa số các bạn thường viết kiểu:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-php\"\u003e\u003cspan style=\"color:#000000\"\u003e$query = \u0026quot;SELECT * FROM USERS\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  WHERE email = \u0026#x27;\u0026quot; . $_POST[\u0026#x27;email\u0026#x27;] . \u0026quot;\u0026#x27;\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  AND password = \u0026#x27;\u0026quot; . $_POST[\u0026#x27;password\u0026#x27;] . \u0026quot;\u0026#x27;\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  LIMIT 1;\u0026quot;\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$result = $connection-\u0026gt;query($sql);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eKhi người dùng gửi request đăng nhập có thông tin, thì câu query trên sẽ tương đương với:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan style=\"color:#D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e*\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e USERS\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e email \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;phat.nhagiau@pankhub.com\u0026#x27;\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e   \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e password \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;password\u0026#x27;\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eLIMIT\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTức là cái gì gửi lên, thì param tương đương sẽ được thay thế bằng cái đó. Điều này vô tình tạo ra một lỗ hổng cực kỳ nguy hiểm. Nếu bạn từng học các môn liên quan tới database hoặc làm việc với database nhiều, các bạn có thể hiểu rằng chỉ với những câu lệnh SQL thôi cũng đủ để chúng làm bất cứ thứ gì liên quan tới dữ liệu.\u003c/p\u003e\u003cp\u003eKhông những thế, SQL Injection còn có thể thực thi được mã HTML hoặc PHP trong nhiều trường hợp. Đó là lý do tại sao lỗ hổng này nghiêm trọng như vậy.\u003c/p\u003e\u003ch3 id=\"chống-injection-như-thế-nào\"\u003eChống injection như thế nào?\u003c/h3\u003e\u003ch4 id=\"truy-vấn-tham-số-parameterized-statements\"\u003eTruy vấn tham số (Parameterized Statements)\u003c/h4\u003e\u003cp\u003eĐa số các ngôn ngữ lập trình hỗ trợ truy vấn SQL đều sẽ hỗ trợ chạy các câu lệnh SQL bằng cách tạo truy vấn để trích xuất các tham số khi cần thiết. Các câu lệnh nên được \u003cem\u003etham số hoá\u003c/em\u003e để đảm bảo rằng các \u003cem\u003etham số\u003c/em\u003e (tức là \u003cem\u003edữ liệu đầu vào\u003c/em\u003e) đưa vào câu lệnh SQL được xử lý một cách an toàn nhất.\u003c/p\u003e\u003cp\u003eVới ví dụ ở \u003ca href=\"#nh%c6%b0ng-t%e1%ba%a1i-sao-c%c3%b3-l%e1%bb%97-h%e1%bb%95ng-n%c3%a0y\"\u003ephần trên\u003c/a\u003e, chúng ta sẽ thử đưa nó về dạng truy vấn tham số:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-php\"\u003e\u003cspan style=\"color:#000000\"\u003e// Câu lệnh SQL chờ tham số\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$sql = \u0026quot;SELECT * FROM USERS\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  WHERE email = ?\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  AND password = ?\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  LIMIT 1\u0026quot;;\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#000000\"\u003e// Chuẩn bị và ràng buộc\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$stmt = $connection-\u0026gt;prepare($sql);\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$stmt-\u0026gt;bind_param(\u0026quot;ss\u0026quot;, $email, $password);\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#000000\"\u003e// Truyền tham số và thực thi\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$email = $_POST[\u0026#x27;email\u0026#x27;];\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$password = $_POST[\u0026#x27;password\u0026#x27;];\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$stmt-\u0026gt;execute();\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#000000\"\u003e// Đừng quên close connection mỗi lần thực thi xong\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$stmt-\u0026gt;close();\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$conn-\u0026gt;close();\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eDạng \u003cstrong\u003ebind\u003c/strong\u003e param này chắc có lẽ sẽ khó để truyền tham số khi số lượng column cần dùng trong query trở nên nhiều hơn, vậy nên còn có cách như sau:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-php\"\u003e\u003cspan style=\"color:#000000\"\u003e// Câu lệnh SQL chờ tham số\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$sql = \u0026quot;SELECT * FROM USERS\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  WHERE email = :email\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  AND password = :password\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  LIMIT 1\u0026quot;;\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#000000\"\u003e// Chuẩn bị và ràng buộc\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$stmt = $connection-\u0026gt;prepare($sql);\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$stmt-\u0026gt;bindParam(\u0026quot;:email\u0026quot;, $email);\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$stmt-\u0026gt;bindParam(\u0026quot;:password\u0026quot;, $password);\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#000000\"\u003e// Truyền tham số và thực thi\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$email = $_POST[\u0026#x27;email\u0026#x27;];\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$password = $_POST[\u0026#x27;password\u0026#x27;];\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e$stmt-\u0026gt;execute();\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eVí dụ trong một số ngôn ngữ khác:\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eC#\u003c/strong\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-csharp\"\u003e\u003cspan style=\"color:#6A737D\"\u003e// Create the SQL command.\u003c/span\u003e\n\u003cspan style=\"color:#D73A49\"\u003eSqlCommand\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e command \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eSqlCommand\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026quot;select * from users where email = @email\u0026quot;\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e, conn);\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#6A737D\"\u003e// Add the parameter values in separately.\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003ecommand.Parameters.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eAdd\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eSqlParameter\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026quot;email\u0026quot;\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e, email);\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#6F42C1\"\u003eusing\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e (SqlDataReader reader \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e command.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eExecuteReader\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e())\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e{\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  \u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003ewhile\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e (reader.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eRead\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e())\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  {\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#6A737D\"\u003e// Do something with the retrieved data.\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  }\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eDjango\u003c/strong\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\u003cspan style=\"color:#6A737D\"\u003e# Good\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003eUsers.objects.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efilter(email\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eemail)\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#6A737D\"\u003e# Good\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003eUsers.objects.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eraw(\u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026quot;select * from users where email = %s\u0026quot;\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e, [email])\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#6A737D\"\u003e# Liable to got hacked\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003eUsers.objects.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eraw(\u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026quot;select * from users where email = \u0026#x27;%s\u0026#x27;\u0026quot;\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e%\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e email)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eNode\u003c/strong\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e\u003cspan style=\"color:#6A737D\"\u003e// node-sql\u003c/span\u003e\n\u003cspan style=\"color:#D73A49\"\u003evar\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e sql \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003erequire\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;sql\u0026#x27;\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e);\u003c/span\u003e\n\u003cspan style=\"color:#D73A49\"\u003evar\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e query \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e user.\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(user.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003estar\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e()))\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e                .\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(user)\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e                .\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003ewhere\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(user.email.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eequals\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(email)).\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003etoQuery\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e();\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#6A737D\"\u003e// mysql\u003c/span\u003e\n\u003cspan style=\"color:#D73A49\"\u003evar\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e mysql \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003erequire\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;mysql\u0026#x27;\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e);\u003c/span\u003e\n\u003cspan style=\"color:#D73A49\"\u003evar\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e connection \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e mysql.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003ecreateConnection\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e({ host\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e HOST, user\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e USERNAME, password\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e PASSWORD });\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003econnection.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e();\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#000000\"\u003econnection.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003equery\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  \u003c/span\u003e\u003cspan style=\"color:#22863A\"\u003e\u0026#x27;select * from users where email = ?\u0026#x27;\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e,\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  [email],\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e(err, rows, fields) {\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#6A737D\"\u003e// Do something with the retrieved data.\u003c/span\u003e\n\u003cspan style=\"color:#000000\"\u003e  });\u003c/span\u003e\n\u003c!-- --\u003e\n\u003cspan style=\"color:#000000\"\u003econnection.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#000000\"\u003e();\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"hãy-validation-từ-front-end-cho-tới-back-end\"\u003eHãy validation từ Front-end cho tới Back-end\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eValidation\u003c/strong\u003e dữ liệu chưa bao giờ là công việc thú vị :okay: tuy nhiên việc validation 2 bước giúp bảo mật tốt hơn, và đồng thời cũng tránh được các lỗi lặt vặt không cần thiết.\u003c/p\u003e\u003cp\u003eVí dụ trên front-end các field nhập vào dữ liệu số, nên dùng input \u003ccode\u003enumber\u003c/code\u003e thay vì input \u003ccode\u003etext\u003c/code\u003e. Các field bắt buộc thì nên \u003ccode\u003erequired\u003c/code\u003e. Mặc dù trên front-end có thể verify dữ liệu đầu vào, nhưng attacker vẫn có thể ignore những rule này để trực tiếp gửi dữ liệu vào back-end, vậy nên trên back-end chúng ta nên verify lại dữ liệu, như kiểu \u003ccode\u003e$age = (int)$_POST[\u0026#x27;age\u0026#x27;]\u003c/code\u003e. Điều này sẽ tránh được các yếu tố gây ra lỗi không đáng có.\u003c/p\u003e\u003ch4 id=\"phân-quyền-quản-trị\"\u003ePhân quyền quản trị\u003c/h4\u003e\u003cp\u003eMình thấy rất nhiều bạn khi xây dựng project, thường sử dụng tài khoản \u003cstrong\u003e\u003ccode\u003eroot\u003c/code\u003e\u003c/strong\u003e của DBMS để làm tất cả mọi thứ... Đó là một sai lầm cực kỳ lớn. Phần lớn các bạn đều chưa hiểu mức độ nghiêm trọng của vấn đề này, vấn đề này giải thích cũng khó hiểu, phải trong trường hợp thực tế các bạn học được thì dễ nhớ hơn.\u003c/p\u003e\u003cp\u003eTuy nhiên mình vẫn sẽ đưa ra một ví dụ đơn giản như sau:\u003c/p\u003e\u003cp\u003eKhi bạn đăng nhập, việc cần làm của database chỉ là vào đọc dữ liệu (quyền \u003cstrong\u003eREAD\u003c/strong\u003e) để verify thông tin. Trong khi các bạn lại cấp full quyền cho \u003cstrong\u003euser\u003c/strong\u003e của DBMS chỉ dùng để đọc... Giả sử form đăng nhập trên hệ thống có lỗ hổng SQL Injection, thì việc attack từ cái form login xoá toàn bộ dữ liệu của bạn là điều cực kỳ đơn giản, còn nếu user tương tác với database chỉ có quyền đọc, thì attacker cũng chỉ có thể truy cập tài khoản đó mà thôi.\u003c/p\u003e\u003cp\u003eNghĩa là bạn chỉ gặp một nguy cơ nhỏ hơn so với cái nguy cơ cực kỳ khủng khiếp kia.\u003c/p\u003e\u003cp\u003eĐó, không phải tự dưng mà \u003cstrong\u003eOracle\u003c/strong\u003e được cho là hệ quản trị database SQL bảo mật nhất, lý do là vì phân quyền của \u003cstrong\u003eOracle\u003c/strong\u003e cực kỳ chặt chẽ. Do đó, tốt nhất nên phân quyền cho các user trong DBMS một cách chặt chẽ và hợp lý, để tránh hối hận về lâu về dài.\u003c/p\u003e\u003cp\u003eVấn đề phân quyền không phải chỉ ở trong DBMS, mà còn ở trong cả hệ thống, và cấu hình \u003cstrong\u003eserver\u003c/strong\u003e. Nhắc lại lần nữa: \u003cstrong\u003ePhân quyền cực kỳ quan trọng\u003c/strong\u003e\u003c/p\u003e\u003cimg title=\"chmod 777 and you will see\" alt=\"chmod 777 and you will see\" src=\"/assets/blog/sql-database-hacking/06.jpg\"/\u003e\u003ch2 id=\"kết-luận\"\u003eKết luận\u003c/h2\u003e\u003cp\u003eSQL Injection không phải một vấn đề mới mẻ, nó tồn tại cả một thập kỷ rồi nhưng nó vẫn đứng đầu bảng xếp hạng về các lỗ hổng nguy hiểm nhất trong nhiều năm liền. Chỉ với một vài bước dễ dàng, hệ thống của bạn có thể bị tê liệt hoàn toàn... Chống thì khó, mà phá thì dễ lắm.\u003c/p\u003e\u003cp\u003eNên nhớ:\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eĐạo cao một thước, ma cao một trượng.\u003c/p\u003e\u003c/blockquote\u003e","scope":{}},"frontMatter":{"date":"Mar 15, 2020","image":"/assets/blog/sql-database-hacking/featured.jpg","title":"Mấy cái trò Database Hacking","description":"Hôm nọ mình vừa đọc được một bài write-up của một bạn White-hat sau khi báo cáo lại lỗ hổng trên trang web của Đại học Harvard, tự dưng thấy kỹ năng về bảo mật của mình bao lâu nay... kém ghê","tags":["dev","web","database","hacking","security"],"slug":"sql-database-hacking"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"sql-database-hacking"},"buildId":"i3TpuQg4kHZPjvdAxxIlt","nextExport":false,"isFallback":false,"dynamicIds":["/0+H","/GRZ","/jkW","0Bsm","0G5g","3WeD","3wub","48fX","5fIB","6D7l","7KCV","7eYB","8Kt/","AroE","C+bE","FYa8","GXs3","KckH","Lab5","Nh2W","PqPU","Qetd","T0f4","X24+","Xuae","YFqc","YTqd","cTJO","dZ6Y","elyg","g/15","gguc","hS4m","i2R6","kG2m","kl55","ls82","lwAK","mPvQ","mxvI","nOHt","oI91","pSHO","q722","qOIg","qVT1","qXWd","qhzo","rlHP","tCBg","vJKn","vNVm","wkBG","zoAU","LbRr","1hph","20a2","dhJC","TkWm","Mj6V","RpaA"],"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8a95e710217664a42390.js"></script><script async="" src="/_next/static/chunks/16.45ddf154bba726880caa.js"></script><script async="" src="/_next/static/chunks/12.720a9abe0c6b7cb2a70d.js"></script><script async="" src="/_next/static/chunks/14.c5b6efb7e620b8334c84.js"></script><script async="" src="/_next/static/chunks/15.1a76e610d1288eacfac2.js"></script><script async="" src="/_next/static/chunks/13.072d922be53c1981f85a.js"></script><script src="/_next/static/chunks/webpack-db5dd7cc9961c8f329e5.js" async=""></script><script src="/_next/static/chunks/framework.e323d2309acd04cbe6bd.js" async=""></script><script src="/_next/static/chunks/commons.7dc06adcda08254d2e3f.js" async=""></script><script src="/_next/static/chunks/main-764a36cd19927cc4b846.js" async=""></script><script src="/_next/static/chunks/pages/_app-9bab551711714ca2a3b3.js" async=""></script><script src="/_next/static/chunks/3ef7d5233a475358d3f5445cedfd796963ec93af.5cd6ceb74ee51c25448c.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-76ee27151674d4ca0a8e.js" async=""></script><script src="/_next/static/i3TpuQg4kHZPjvdAxxIlt/_buildManifest.js" async=""></script><script src="/_next/static/i3TpuQg4kHZPjvdAxxIlt/_ssgManifest.js" async=""></script></body></html>