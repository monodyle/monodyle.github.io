<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#24292e"/><meta name="apple-mobile-web-app-title" content="The Monody&#x27;s Space"/><meta name="application-name" content="The Monody&#x27;s Space"/><meta name="msapplication-TileColor" content="#1366E9"/><meta name="theme-color" content="#ffffff"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Máº¥y cÃ¡i trÃ² Database Hacking</title><meta name="title" content="Máº¥y cÃ¡i trÃ² Database Hacking"/><meta name="description" content="Hello, just a simple guy."/><meta name="image" content="https://monodyle.github.io/assets/blog/sql-database-hacking/featured.jpg"/><meta property="og:url" content="https://monodyle.github.io/blog/sql-database-hacking"/><meta property="og:type" content="website"/><meta property="og:title" content="Máº¥y cÃ¡i trÃ² Database Hacking"/><meta property="og:description" content="Hello, just a simple guy."/><meta property="og:image" content="https://monodyle.github.io/assets/blog/sql-database-hacking/featured.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="Monody Le"/><meta name="twitter:title" content="Máº¥y cÃ¡i trÃ² Database Hacking"/><meta name="twitter:description" content="Hello, just a simple guy."/><meta name="twitter:image" content="https://monodyle.github.io/assets/blog/sql-database-hacking/featured.jpg"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/c4614ce58cf99c21c738.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c4614ce58cf99c21c738.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b1003c7fd9af2bec9916.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b1003c7fd9af2bec9916.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-cf627c1b502115102538.js" defer=""></script><script src="/_next/static/chunks/framework-64eb7138163e04c228e4.js" defer=""></script><script src="/_next/static/chunks/main-021fc08f00c92a589d4e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-73554b86524b8d57d1e7.js" defer=""></script><script src="/_next/static/chunks/670-e913ad2df44a9360cf4c.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-da4a89074689a68e09d0.js" defer=""></script><script src="/_next/static/EoFBNuKZQIZTtRXAUTpDc/_buildManifest.js" defer=""></script><script src="/_next/static/EoFBNuKZQIZTtRXAUTpDc/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col items-center justify-between min-h-screen"><div class="container flex flex-col px-16 py-20 mx-auto"><nav class="flex items-center justify-between leading-6"><div class="flex items-center"><a class="text-base font-bold leading-6 rainbown cursor-pointer" href="/">home.</a><div class="px-4 text-dark-muted">/</div><span class="text-base font-bold leading-6">writing.<!-- --> <!-- -->ğŸ“</span></div><div class="flex items-center"><div class="w-12"></div><a class="text-base font-bold leading-6 rainbown cursor-none" href="/hi">say hi.</a><div class="cursor_cursor__1ID5l cursor_hide__17TGI " style="left:0;top:0"><div class="cursor_icon__2mcpm"><div class="cursor_wave__1Tlmd">ğŸ‘‹</div></div></div><div class="w-12"></div><a class="text-base font-bold leading-6 rainbown cursor-none" href="/work">working.</a><div class="cursor_cursor__1ID5l cursor_hide__17TGI " style="left:0;top:0"><div class="cursor_icon__2mcpm">ğŸ’»</div></div></div></nav><div class="h-16"></div><div class="flex-auto flex-shrink-0"><article class="post_article__2w3XN"><div class="mb-6 font-bold"><a class="rainbown" href="/blog">&lt; Back</a></div><div class="post_hero__3BSnJ"><img src="/assets/blog/sql-database-hacking/featured.jpg" alt="Máº¥y cÃ¡i trÃ² Database Hacking" title="Máº¥y cÃ¡i trÃ² Database Hacking"/></div><div class="flex items-center justify-between mb-2"><span class="post_time__ih63X">Mar 15, 2020</span><div class="flex"><span class="post_tag__28ZFZ">web</span><span class="post_tag__28ZFZ">database</span><span class="post_tag__28ZFZ">hacking</span><span class="post_tag__28ZFZ">security</span></div></div><h2 class="post_title__3g4nB">Máº¥y cÃ¡i trÃ² Database Hacking</h2><div id="content" class="post_content__1tL7U post_markdown__38t3u"><p>HÃ´m ná» mÃ¬nh vá»«a Ä‘á»c Ä‘Æ°á»£c má»™t bÃ i write-up cá»§a má»™t báº¡n white-hat sau khi bÃ¡o cÃ¡o láº¡i lá»— há»•ng SQL Injection trÃªn trang web cá»§a Äáº¡i há»c Harvard, tá»± dÆ°ng tháº¥y ká»¹ nÄƒng vá» báº£o máº­t cá»§a mÃ¬nh bao lÃ¢u nay... kÃ©m ghÃª.</p>
<p>Báº£n thÃ¢n lÃ  sinh viÃªn chuyÃªn ngÃ nh <strong>Há»‡ Thá»‘ng ThÃ´ng Tin</strong>, tá»©c lÃ  chuyÃªn ngá»“i Ä‘áº¥u váº­t vá»›i máº¥y cÃ¡i cÆ¡ sá»Ÿ dá»¯ liá»‡u mÃ  láº¡i ráº¥t hay quÃªn Ä‘i nhá»¯ng cÃ¡i quan trá»ng nhÆ° tháº¿ nÃ y... Cáº£m tháº¥y xáº¥u há»•, tháº¿ lÃ  mÃ¬nh pháº£i mÃ² láº¡i nhá»¯ng gÃ¬ mÃ¬nh Ä‘Ã£ há»c, nhÆ°ng khÃ´ng dÃ¹ng tá»›i láº¡i quÃªn máº¥t, rá»“i viáº¿t thÃ nh má»™t blog Ä‘á»ƒ coi nhÆ° vá»«a há»c láº¡i, vá»«a chia sáº» kiáº¿n thá»©c cho má»i ngÆ°á»i <img src="/assets/emoji/smug.png" emoji /> <del>MÃ¬nh tháº­t tuyá»‡t</del></p>
<h2 id="tháº±ng-chÃ³-mÃ y-hack-web-bá»‘-mÃ y">Tháº±ng chÃ³, mÃ y hack web bá»‘ mÃ y...</h2>
<p>HÃ¨ vá»«a rá»“i mÃ¬nh cÃ³ trÃ² chuyá»‡n vá»›i má»™t Ã´ng anh trong nghá», á»•ng tÃ¢m sá»± vá» chuyá»‡n bá»‹ tháº±ng nÃ o tháº£ bot nÃ³ clean máº¹ cÃ¡i database, Ä‘á»ƒ láº¡i Ä‘Ãºng má»™t dÃ²ng duy nháº¥t:</p>
<blockquote>
<p>Gá»­i bá»‘ mÃ y vÃ i Bitcoin Ä‘Ãª, bá»‘ mÃ y tráº£ láº¡i dá»¯ liá»‡u cho... <img src="/assets/emoji/look_down.png" emoji /></p>
</blockquote>
<p>VÃ  kÃ¨m theo Ä‘Ã³ lÃ  Ä‘á»‹a chá»‰ vÃ­ bitcoin cá»§a háº¯n <img src="/assets/emoji/surrender.png" emoji /> TÃ­nh Ã´ng anh mÃ¬nh Ä‘Æ°á»£c cÃ¡i tháº­t thÃ , nhÃ  cÅ©ng khÃ´ng cÃ³ gÃ¬ ngoÃ i Ä‘iá»u kiá»‡n, tháº¿ lÃ  gá»­i cho nÃ³ vÃ i bitcoin coi nhÆ° tiá»n Äƒn sÃ¡ng, hÃ´m sau tháº¥y nÃ³ restore láº¡i dá»¯ liá»‡u tháº­t <img src="/assets/emoji/mokas.png" emoji /></p>
<p>NhÆ°ng mÃ  tá»©c quÃ¡, ai Ä‘á»i lÃ m láº­p trÃ¬nh cÃ³ sáº£n pháº©m Ä‘ang cháº¡y phÃ  phÃ  láº¡i cÃ³ tháº±ng choÃ¡ nÃ o hack, nghÄ© cÃ³ cay khÃ´ng cÆ¡ chá»©? <img src="/assets/emoji/yikes.png" emoji /></p>
<p>MÃ¬nh khÃ´ng rÃµ lÃ  cÃ¡i database Ä‘Ã³ bá»‹ hack nhÆ° tháº¿ nÃ o, nhÆ°ng khÃ¡ cháº¯c cháº¯n pháº§n lá»›n lÃ  bá»Ÿi vÃ¬ code chÆ°a Ä‘á»§ báº£o máº­t vÃ  cÃ³ nhiá»u lá»— há»•ng. CÃ¡c hacker sáº½ viáº¿t má»™t con bot chuyÃªn Ä‘i dáº¡o trÃªn máº¡ng Ä‘á»ƒ attack vÃ o nhá»¯ng case báº£o máº­t thÆ°á»ng dá»… bá»‹ hack nháº¥t.</p>
<p>VÃ¬ váº­y bÃ i viáº¿t nÃ y mÃ¬nh sáº½ giá»›i thiá»‡u cho cÃ¡c báº¡n má»™t loáº¡i lá»— há»•ng <strong>cÆ¡ báº£n</strong> nhÆ°ng cá»±c ká»³ nguy hiá»ƒm, giáº£i thÃ­ch cÆ¡ cháº¿ vÃ  hÆ°á»›ng dáº«n cÃ¡ch phÃ²ng chá»‘ng. VÃ  xin giá»›i thiá»‡u cÃ¡i trÃ² gá»i lÃ  <strong>SQL Injection</strong>.</p>
<p><strong>LÆ°u Ã½:</strong></p>
<p>BÃ i viáº¿t nÃ y nháº±m má»¥c Ä‘Ã­ch giao lÆ°u ká»¹ nÄƒng báº£o máº­t láº­p trÃ¬nh, khÃ´ng cá»• suÃ½ cÃ¡c báº¡n Ä‘i phÃ¡ lÃ ng phÃ¡ xÃ³m. HÃ£y tá»‰nh tÃ¡o <img src="/assets/emoji/smug.png" emoji /></p>
<h2 id="nháº­p-mÃ´n-hack-cÆ¡-sá»Ÿ-dá»¯-liá»‡u-sql">Nháº­p mÃ´n hack CÆ¡ sá»Ÿ dá»¯ liá»‡u SQL</h2>
<p>Trong nhiá»u loáº¡i táº¥n cÃ´ng lá»— há»•ng nháº±m vÃ o website, táº¥n cÃ´ng <strong>SQL Injection</strong> lÃ  má»™t trong nhá»¯ng loáº¡i nguy hiá»ƒm vÃ  phá»• biáº¿n nháº¥t. NÃ³ Ä‘Ã£ tá»«ng gÃ¢y ra nhiá»u thiá»‡t háº¡i Ä‘Ã¡ng ká»ƒ cho nhiá»u doanh nghiá»‡p vÃ  tá»• chá»©c trong ráº¥t nhiá»u nÄƒm, vÃ  Ä‘Æ°Æ¡ng nhiÃªn sáº½ cÃ²n tiáº¿p diá»…n trong tÆ°Æ¡ng lai.</p>
<p></p>
<p>Theo <a href="https://vi.wikipedia.org/wiki/SQL_injection">Wikipedia</a> <img src="/assets/emoji/popcorn.png" emoji />:</p>
<blockquote>
<p><strong>SQL injection</strong> lÃ  má»™t ká»¹ thuáº­t cho phÃ©p nhá»¯ng káº» táº¥n cÃ´ng lá»£i dá»¥ng lá»— há»•ng cá»§a viá»‡c kiá»ƒm tra dá»¯ liá»‡u Ä‘áº§u vÃ o trong cÃ¡c á»©ng dá»¥ng web vÃ  cÃ¡c thÃ´ng bÃ¡o lá»—i cá»§a há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u tráº£ vá» Ä‘á»ƒ <em>inject</em> (<em>tiÃªm vÃ o</em>) vÃ  thi hÃ nh cÃ¡c cÃ¢u lá»‡nh SQL báº¥t há»£p phÃ¡p.</p>
</blockquote>
<p>á»œ thÃ¬ khÃ¡i niá»‡m nhÆ° váº­y Ä‘áº¥y, hiá»ƒu má»™t cÃ¡ch Ä‘Æ¡n giáº£n tá»©c lÃ  loáº¡i táº¥n cÃ´ng nÃ y nháº±m vÃ o cÃ¡c <strong>input</strong> cÃ³ <strong>tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p</strong> vá»›i <strong>database</strong> á»Ÿ <strong>back-end</strong> (vÃ­ dá»¥ nhÆ° cÃ¡c input email, password á»Ÿ form login). ThÃ´ng thÆ°á»ng, attacker sáº½ táº¥n cÃ´ng Ä‘á»ƒ Äƒn cáº¯p dá»¯ liá»‡u, loáº¡i nÃ y vá» cÆ¡ báº£n lÃ  hiá»n nháº¥t, sau Ä‘Ã³ tá»›i xÃ¡o trá»™n dá»¯ liá»‡u Ä‘á»ƒ cáº£n trá»Ÿ sá»± hoáº¡t Ä‘á»™ng cá»§a website, vÃ  trÆ°á»ng há»£p xáº¥u nháº¥t, lÃ  quyá»n truy cáº­p quáº£n trá»‹ vÃ o mÃ¡y chá»§ database bá»‹ chiáº¿m. <img src="/assets/emoji/moka.png" emoji /></p>
<p>Trong lá»‹ch sá»­, Ä‘Ã£ cÃ³ ráº¥t nhiá»u Ä‘á»£t táº¥n cÃ´ng SQL Injection nháº±m má»¥c Ä‘Ã­ch:</p>
<ul>
<li>TrÃ­ch xuáº¥t thÃ´ng tin nháº¡y cáº£m, vÃ­ dá»¥ nhÆ° vá» an sinh xÃ£ há»™i, hay thÃ´ng tin tháº» tÃ­n dá»¥ng</li>
<li>TrÃ­ch xuáº¥t thÃ´ng tin ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ trÃªn cÃ¡c website, á»Ÿ Viá»‡t Nam cÅ©ng khÃ´ng Ã­t trÆ°á»ng há»£p</li>
<li>XoÃ¡ luÃ´n cÃ¡i database, cÃ³ ráº¥t nhiá»u trang web khÃ´ng sá»­ dá»¥ng backup dá»¯ liá»‡u, vÃ  khi bá»‹ xoÃ¡ thÃ¬ coi nhÆ° cáº£ há»‡ thá»‘ng tÃª liá»‡t, vÃ­ dá»¥ cá»§a Ã´ng anh bÃªn trÃªn lÃ  vÃ­ dá»¥ gáº§n gÅ©i nháº¥t</li>
<li>TiÃªm mÃ£ Ä‘á»™c thá»±c thi vÃ o trang web khi ngÆ°á»i dÃ¹ng truy cáº­p</li>
</ul>
<p><strong>Nháº¯c láº¡i má»™t láº§n ná»¯a:</strong> Táº¥n cÃ´ng vá» SQL Injection cá»±c ká»³ phá»• biáº¿n. CÃ¡c cÃ´ng ty lá»›n nhÆ° <strong>Yahoo</strong> hay <strong>Sony</strong> Ä‘Ã£ tá»«ng lÃ  nháº¡n nhÃ¢n cá»§a trÃ² chÆ¡i nÃ y. CÃ¡c nhÃ³m hacker cÃ²n viáº¿t háº³n cÃ¡c script bot Ä‘á»ƒ tá»± Ä‘i táº¥n cÃ´ng dáº¡o trÃªn internet, vÃ¬ váº­y hÃ£y luÃ´n cáº©n tháº­n vá»›i sáº£n pháº©m cá»§a báº¡n.</p>
<h3 id="cÆ¡-cháº¿-khai-thÃ¡c-vÃ -táº¥n-cÃ´ng">CÆ¡ cháº¿ khai thÃ¡c vÃ  táº¥n cÃ´ng</h3>
<p>SQL Injection táº¥n cÃ´ng báº±ng cÃ¡ch gá»­i má»™t mÃ£ lá»‡nh SQL Ä‘á»™c Ä‘áº¿n back-end cá»§a mÃ¡y chá»§ cÆ¡ sá»Ÿ Ä‘á»¯ liá»‡u, thÃ´ng qua cÃ¡c request cá»§a ngÆ°á»i dÃ¹ng mÃ  website cho phÃ©p. Báº¥t ká»³ input nÃ o cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ gá»­i mÃ£ Ä‘á»™c, tá»©c lÃ  bao gá»“m cáº£: cÃ¡c tháº» <code>&#x3C;input></code> nháº­p liá»‡u, query strings, cookies vÃ  file upload.</p>
<p>MÃ¬nh sáº½ cÃ³ má»™t vÃ­ dá»¥ nhÆ° sau: Giáº£ sá»­ Ä‘Ã¢y lÃ  trang Ä‘Äƒng nháº­p vÃ o ngÃ¢n hÃ ng <strong>PankHub</strong>, vá»›i form Ä‘Äƒng nháº­p gá»“m 2 fields lÃ  <code>email</code> vÃ  <code>password</code>:</p>
<p>BÃ¢y giá» mÃ¬nh sáº½ thá»­ Ä‘Äƒng nháº­p tÃ i khoáº£n cá»§a ngÆ°á»i dÃ¹ng tÃªn lÃ  <strong>PhÃ¡t</strong> (jk, don't panic) vá»›i <em>email</em> lÃ : <code>phat.nhagiau@pankhub.com</code> vÃ  <em>password</em> lÃ  <code>password</code></p>
<p>á»ª thÃ¬ Ä‘Æ°Æ¡ng nhiÃªn lÃ  khÃ´ng Ä‘Äƒng nháº­p Ä‘Æ°á»£c rá»“i <img src="/assets/emoji/okay.png" emoji /> ÄÃ¢y lÃ  trÆ°á»ng há»£p giáº£ sá»­ mÃ¬nh lÃ  má»™t attacker, vÃ  mÃ¬nh tÃ¬nh cá» Ä‘á»‹a Ä‘Æ°á»£c email cá»§a ngÆ°á»i dÃ¹ng nÃ y sau khi Ä‘i ngang qua lÃºc nÃ³ Ä‘ang Ä‘Äƒng nháº­p vÃ o ngÃ¢n hÃ ng á»Ÿ tiá»‡m net <img src="/assets/emoji/smug.png" emoji /> Victim cá»§a mÃ¬nh lÃ  má»™t tháº±ng Ä‘áº¡i gia nhÃ  giÃ u, tiá»n khÃ´ng nhá»¯ng Ä‘Æ°á»£c quy ra báº±ng vÃ ng Ä‘á»ƒ trong kÃ©t mÃ  cÃ²n cÃ³ cáº£ má»™t Ä‘á»‘ng trong nhÃ  bÄƒng. XÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c má»¥c tiÃªu thÃ¬ trÃ­ch xuáº¥t thÃ´ng tin má»¥c tiÃªu lÃ  Ä‘iá»u cáº§n thiáº¿t. VÃ¬ váº­y mÃ¬nh chá»‰ thá»­ Ä‘Äƒng nháº­p cho vui thÃ´i, Ä‘Æ°Æ¡ng nhiÃªn lÃ m gÃ¬ cÃ³ tháº±ng <del>ngu</del> nÃ o Ä‘áº·t máº­t kháº©u lÃ  <code>password</code> cÆ¡ chá»© (jk)</p>
<p>BÃ¢y giá» hÃ£y nhÃ¬n váº¥n Ä‘á» tá»« phÃ­a server log nhÃ©, chÃºng ta sáº½ cÃ³ 1 cÃ¡i logging nhÆ° sau:</p>
<pre><code>Rendering login page.
Checking supplied authentication details for phat.nhagiau@pankhub.com.
Finding user in database.
No such user, report this to the user (invalid credentials?).
Rendering login page.
</code></pre>
<p>Sau Ä‘Ã³, mÃ¬nh tiáº¿p tá»¥c truy thá»­ login vÃ o tÃ i khoáº£n cá»§a victim, nhÆ°ng láº§n nÃ y password mÃ¬nh sáº½ thÃªm má»™t <em>dáº¥u nhÃ¡y Ä‘Æ¡n</em> <code>'</code>, káº¿t quáº£ cÃ³ Ä‘Æ°á»£c lÃ :</p>
<p>Tháº¥y sá»± khÃ¡c biá»‡t rá»“i pháº£i khÃ´ng? ThÃ´ng thÆ°á»ng, vá»›i nhá»¯ng trÆ°á»ng há»£p sai thÃ´ng tin Ä‘Äƒng nháº­p sáº½ luÃ´n cho ra má»™t message lá»—i (trang nÃ o nÃ³ random message thÃ¬ bÃ³ tay), vÃ¬ váº­y cÃ³ gÃ¬ Ä‘Ã³ khÃ´ng Ä‘Ãºng xáº£y ra rá»“i, cÃ³ thá»ƒ nguyÃªn do lÃ  bá»Ÿi dáº¥u nhÃ¡y Ä‘Æ¡n chÄƒng?</p>
<p>Server log:</p>
<pre><code>...

Rendering login page.
Checking supplied authentication details for phat.nhagiau@pankhub.com.
Finding user in database.
An error occurred: PG::SyntaxError: ERROR: unterminated quoted string at or near "'password'' limit 1" LINE 1: ...ers where email = 'phat.nhagiau@pankhub.com' and password = 'password'... ^ : select * from users where email = 'phat.nhagiau@pankhub.com' and password = 'password'' limit 1.
Unable to login this user due to unexpected error.
Rendering login page.
</code></pre>
<p>NhÃ¬n tháº¥y á»Ÿ log hiá»ƒn thá»‹ SQL syntax error chá»©? Äiá»u nÃ y chá»©ng tá» dáº¥u nhÃ¡y Ä‘Æ¡n chÃ­nh lÃ  nguyÃªn nhÃ¢n gÃ¢y ra lá»—i. Thá»­ ghÃ©p vÃ o cÃ¢u lá»‡nh SQL Ä‘Æ°á»£c cháº¡y trÃªn server thÃ¬ nÃ³ sáº½ trÃ´ng nhÆ° tháº¿ nÃ y:</p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #D73A49">SELECT</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">FROM</span><span style="color: #24292E"> users</span></span>
<span class="line"><span style="color: #24292E"> </span><span style="color: #D73A49">WHERE</span><span style="color: #24292E"> email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'phat.nhagiau@pankhub.com'</span></span>
<span class="line"><span style="color: #24292E">   </span><span style="color: #D73A49">AND</span><span style="color: #24292E"> pass  </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'password'' LIMIT 1</span></span>
<span class="line"></span></code></pre>
<p>DÆ° 1 dáº¥u nhÃ¡y Ä‘Æ¡n, cÃ¢u lá»‡nh nÃ y cháº¡y trong SQL cháº¯c cháº¯n sáº½ lá»—i. VÃ  Ä‘Ã¢y chÃ­nh lÃ  thá»© gá»i lÃ  <strong>SQL Injection</strong>.</p>
<p>Sau khi xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c lá»— há»•ng, mÃ¬nh sáº½ thá»­ Ä‘Äƒng nháº­p láº¡i vá»›i password lÃ  <strong><code>' OR 1=1--</code></strong>. CÃ¢u lá»‡nh SQL lÃºc nÃ y Ä‘Æ°á»£c thá»±c thi trÃªn server sáº½ lÃ :</p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #D73A49">SELECT</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">FROM</span><span style="color: #24292E"> users</span></span>
<span class="line"><span style="color: #24292E"> </span><span style="color: #D73A49">WHERE</span><span style="color: #24292E"> email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'phat.nhagiau@pankhub.com'</span></span>
<span class="line"><span style="color: #24292E">   </span><span style="color: #D73A49">AND</span><span style="color: #24292E"> pass  </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">''</span><span style="color: #24292E"> </span><span style="color: #D73A49">OR</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #D73A49">=</span><span style="color: #005CC5">1</span><span style="color: #24292E"> </span><span style="color: #6A737D">--' LIMIT 1</span></span>
<span class="line"></span></code></pre>
<p>Server log:</p>
<pre><code>Rendering login page.
Checking supplied authentication details for phat.nhagiau@pankhub.com.
Finding user in database.
Authentication details confirmed, establishing session for this user.
</code></pre>
<p>Xong, tÃ i khoáº£n cá»§a báº¡n náº±m trong tay tÃ´i <img src="/assets/emoji/ok.png" emoji /></p>
<p>CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng Ä‘Æ¡n giáº£n nháº¥t cá»§a <strong>SQL Injection</strong> lÃ  nhÆ° váº­y Ä‘á». Thá»±c thi nÃ³ khÃ´ng há» khÃ³, nhÆ°ng Ä‘á»ƒ nháº­n ra Ä‘Æ°á»£c trang nÃ o cÃ³ lá»— há»•ng thÃ¬ láº¡i khÃ¡ khÃ³, vÃ¬ khÃ´ng pháº£i lÃºc nÃ o khai thÃ¡c lá»— há»•ng SQL Injection nÃ³ cÅ©ng y chang nhÆ° váº­y.</p>
<h3 id="nhÆ°ng-táº¡i-sao-cÃ³-lá»—-há»•ng-nÃ y">NhÆ°ng táº¡i sao cÃ³ lá»— há»•ng nÃ y?</h3>
<p>LÃ½ do lá»›n nháº¥t lÃ  cÃ¡c báº¡n chÆ°a thá»ƒ tiáº¿p cáº­n toÃ n bá»™ cÃ¡c case trong quÃ¡ trÃ¬nh code. Báº¡n khÃ´ng bao giá» lÆ°á»ng trÆ°á»›c Ä‘Æ°á»£c ngÆ°á»i dÃ¹ng sáº½ lÃ m cÃ¡i <del>Ä‘Ã©o</del> gÃ¬ trÃªn sáº£n pháº©m cá»§a mÃ¬nh. <img src="/assets/emoji/sad.png" emoji /> ChÃ­nh vÃ¬ váº­y thÆ°á»ng cÃ¡c case khÃ´ng bao giá» Ä‘Æ°á»£c nghÄ© tá»›i nÃ y láº¡i vÃ´ tÃ¬nh táº¡o ra lá»— há»•ng cho attacker khai thÃ¡c.</p>
<p>Khi viáº¿t cÃ¡c cÃ¢u lá»‡nh SQL trong source (á»Ÿ Ä‘Ã¢y mÃ¬nh sáº½ láº¥y <strong>PHP</strong> lÃ m vÃ­ dá»¥), Ä‘a sá»‘ cÃ¡c báº¡n thÆ°á»ng viáº¿t kiá»ƒu:</p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #24292E">$query </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"</span><span style="color: #D73A49">SELECT</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #24292E"> </span><span style="color: #D73A49">FROM</span><span style="color: #24292E"> USERS</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">WHERE</span><span style="color: #24292E"> email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'"</span><span style="color: #24292E"> </span><span style="color: #D73A49">.</span><span style="color: #24292E"> $_POST[</span><span style="color: #032F62">'email'</span><span style="color: #24292E">] </span><span style="color: #D73A49">.</span><span style="color: #24292E"> </span><span style="color: #032F62">"'</span></span>
<span class="line"><span style="color: #032F62">  AND password = '"</span><span style="color: #24292E"> </span><span style="color: #D73A49">.</span><span style="color: #24292E"> $_POST[</span><span style="color: #032F62">'password'</span><span style="color: #24292E">] </span><span style="color: #D73A49">.</span><span style="color: #24292E"> </span><span style="color: #032F62">"'</span></span>
<span class="line"><span style="color: #032F62">  LIMIT 1;"</span></span>
<span class="line"><span style="color: #24292E">$result </span><span style="color: #D73A49">=</span><span style="color: #24292E"> $connection</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">query</span><span style="color: #24292E">($sql);</span></span>
<span class="line"></span></code></pre>
<p>Khi ngÆ°á»i dÃ¹ng gá»­i request Ä‘Äƒng nháº­p cÃ³ thÃ´ng tin, thÃ¬ cÃ¢u query trÃªn sáº½ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i:</p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #D73A49">SELECT</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">FROM</span><span style="color: #24292E"> USERS</span></span>
<span class="line"><span style="color: #24292E"> </span><span style="color: #D73A49">WHERE</span><span style="color: #24292E"> email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'phat.nhagiau@pankhub.com'</span></span>
<span class="line"><span style="color: #24292E">   </span><span style="color: #D73A49">AND</span><span style="color: #24292E"> </span><span style="color: #D73A49">password</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'password'</span><span style="color: #24292E"> </span><span style="color: #D73A49">LIMIT</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span></span>
<span class="line"></span></code></pre>
<p>Tá»©c lÃ  cÃ¡i gÃ¬ gá»­i lÃªn, thÃ¬ param tÆ°Æ¡ng Ä‘Æ°Æ¡ng sáº½ Ä‘Æ°á»£c thay tháº¿ báº±ng cÃ¡i Ä‘Ã³. Äiá»u nÃ y vÃ´ tÃ¬nh táº¡o ra má»™t lá»— há»•ng cá»±c ká»³ nguy hiá»ƒm. Náº¿u báº¡n tá»«ng há»c cÃ¡c mÃ´n liÃªn quan tá»›i database hoáº·c lÃ m viá»‡c vá»›i database nhiá»u, cÃ¡c báº¡n cÃ³ thá»ƒ hiá»ƒu ráº±ng chá»‰ vá»›i nhá»¯ng cÃ¢u lá»‡nh SQL thÃ´i cÅ©ng Ä‘á»§ Ä‘á»ƒ chÃºng lÃ m báº¥t cá»© thá»© gÃ¬ liÃªn quan tá»›i dá»¯ liá»‡u.</p>
<p>KhÃ´ng nhá»¯ng tháº¿, SQL Injection cÃ²n cÃ³ thá»ƒ thá»±c thi Ä‘Æ°á»£c mÃ£ HTML hoáº·c PHP trong nhiá»u trÆ°á»ng há»£p. ÄÃ³ lÃ  lÃ½ do táº¡i sao lá»— há»•ng nÃ y nghiÃªm trá»ng nhÆ° váº­y.</p>
<h3 id="chá»‘ng-injection-nhÆ°-tháº¿-nÃ o">Chá»‘ng injection nhÆ° tháº¿ nÃ o?</h3>
<h4 id="truy-váº¥n-tham-sá»‘-parameterized-statements">Truy váº¥n tham sá»‘ (Parameterized Statements)</h4>
<p>Äa sá»‘ cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh há»— trá»£ truy váº¥n SQL Ä‘á»u sáº½ há»— trá»£ cháº¡y cÃ¡c cÃ¢u lá»‡nh SQL báº±ng cÃ¡ch táº¡o truy váº¥n Ä‘á»ƒ trÃ­ch xuáº¥t cÃ¡c tham sá»‘ khi cáº§n thiáº¿t. CÃ¡c cÃ¢u lá»‡nh nÃªn Ä‘Æ°á»£c <em>tham sá»‘ hoÃ¡</em> Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng cÃ¡c <em>tham sá»‘</em> (tá»©c lÃ  <em>dá»¯ liá»‡u Ä‘áº§u vÃ o</em>) Ä‘Æ°a vÃ o cÃ¢u lá»‡nh SQL Ä‘Æ°á»£c xá»­ lÃ½ má»™t cÃ¡ch an toÃ n nháº¥t.</p>
<p>Vá»›i vÃ­ dá»¥ á»Ÿ <a href="#nh%c6%b0ng-t%e1%ba%a1i-sao-c%c3%b3-l%e1%bb%97-h%e1%bb%95ng-n%c3%a0y">pháº§n trÃªn</a>, chÃºng ta sáº½ thá»­ Ä‘Æ°a nÃ³ vá» dáº¡ng truy váº¥n tham sá»‘:</p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #6A737D">// CÃ¢u lá»‡nh SQL chá» tham sá»‘</span></span>
<span class="line"><span style="color: #24292E">$sql </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"</span><span style="color: #D73A49">SELECT</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #24292E"> </span><span style="color: #D73A49">FROM</span><span style="color: #24292E"> USERS</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">WHERE</span><span style="color: #24292E"> email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> ?</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">AND</span><span style="color: #24292E"> </span><span style="color: #D73A49">password</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> ?</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">LIMIT</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #032F62">"</span><span style="color: #24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// Chuáº©n bá»‹ vÃ  rÃ ng buá»™c</span></span>
<span class="line"><span style="color: #24292E">$stmt </span><span style="color: #D73A49">=</span><span style="color: #24292E"> $connection</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">prepare</span><span style="color: #24292E">($sql);</span></span>
<span class="line"><span style="color: #24292E">$stmt</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">bind_param</span><span style="color: #24292E">(</span><span style="color: #032F62">"ss"</span><span style="color: #24292E">, $email, $password);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// Truyá»n tham sá»‘ vÃ  thá»±c thi</span></span>
<span class="line"><span style="color: #24292E">$email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> $_POST[</span><span style="color: #032F62">'email'</span><span style="color: #24292E">];</span></span>
<span class="line"><span style="color: #24292E">$password </span><span style="color: #D73A49">=</span><span style="color: #24292E"> $_POST[</span><span style="color: #032F62">'password'</span><span style="color: #24292E">];</span></span>
<span class="line"><span style="color: #24292E">$stmt</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">execute</span><span style="color: #24292E">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// Äá»«ng quÃªn close connection má»—i láº§n thá»±c thi xong</span></span>
<span class="line"><span style="color: #24292E">$stmt</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">close</span><span style="color: #24292E">();</span></span>
<span class="line"><span style="color: #24292E">$conn</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">close</span><span style="color: #24292E">();</span></span>
<span class="line"></span></code></pre>
<p>Dáº¡ng <strong>bind</strong> param nÃ y cháº¯c cÃ³ láº½ sáº½ khÃ³ Ä‘á»ƒ truyá»n tham sá»‘ khi sá»‘ lÆ°á»£ng column cáº§n dÃ¹ng trong query trá»Ÿ nÃªn nhiá»u hÆ¡n, váº­y nÃªn cÃ²n cÃ³ cÃ¡ch nhÆ° sau:</p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #6A737D">// CÃ¢u lá»‡nh SQL chá» tham sá»‘</span></span>
<span class="line"><span style="color: #24292E">$sql </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"</span><span style="color: #D73A49">SELECT</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #24292E"> </span><span style="color: #D73A49">FROM</span><span style="color: #24292E"> USERS</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">WHERE</span><span style="color: #24292E"> email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> :email</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">AND</span><span style="color: #24292E"> </span><span style="color: #D73A49">password</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> :</span><span style="color: #D73A49">password</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">LIMIT</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #032F62">"</span><span style="color: #24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// Chuáº©n bá»‹ vÃ  rÃ ng buá»™c</span></span>
<span class="line"><span style="color: #24292E">$stmt </span><span style="color: #D73A49">=</span><span style="color: #24292E"> $connection</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">prepare</span><span style="color: #24292E">($sql);</span></span>
<span class="line"><span style="color: #24292E">$stmt</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">bindParam</span><span style="color: #24292E">(</span><span style="color: #032F62">":email"</span><span style="color: #24292E">, $email);</span></span>
<span class="line"><span style="color: #24292E">$stmt</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">bindParam</span><span style="color: #24292E">(</span><span style="color: #032F62">":password"</span><span style="color: #24292E">, $password);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// Truyá»n tham sá»‘ vÃ  thá»±c thi</span></span>
<span class="line"><span style="color: #24292E">$email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> $_POST[</span><span style="color: #032F62">'email'</span><span style="color: #24292E">];</span></span>
<span class="line"><span style="color: #24292E">$password </span><span style="color: #D73A49">=</span><span style="color: #24292E"> $_POST[</span><span style="color: #032F62">'password'</span><span style="color: #24292E">];</span></span>
<span class="line"><span style="color: #24292E">$stmt</span><span style="color: #D73A49">-></span><span style="color: #6F42C1">execute</span><span style="color: #24292E">();</span></span>
<span class="line"></span></code></pre>
<p>VÃ­ dá»¥ trong má»™t sá»‘ ngÃ´n ngá»¯ khÃ¡c:</p>
<p><strong>C#</strong></p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #6A737D">// Create the SQL command.</span></span>
<span class="line"><span style="color: #D73A49">SqlCommand</span><span style="color: #24292E"> </span><span style="color: #6F42C1">command</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #D73A49">SqlCommand</span><span style="color: #24292E">(</span><span style="color: #032F62">"select * from users where email = @email"</span><span style="color: #24292E">, conn);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// Add the parameter values in separately.</span></span>
<span class="line"><span style="color: #24292E">command.Parameters.</span><span style="color: #6F42C1">Add</span><span style="color: #24292E">(</span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #D73A49">SqlParameter</span><span style="color: #24292E">(</span><span style="color: #032F62">"email"</span><span style="color: #24292E">, email);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6F42C1">using</span><span style="color: #24292E"> (SqlDataReader reader </span><span style="color: #D73A49">=</span><span style="color: #24292E"> command.</span><span style="color: #6F42C1">ExecuteReader</span><span style="color: #24292E">())</span></span>
<span class="line"><span style="color: #24292E">{</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #6F42C1">while</span><span style="color: #24292E"> (reader.</span><span style="color: #6F42C1">Read</span><span style="color: #24292E">())</span></span>
<span class="line"><span style="color: #24292E">  {</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6A737D">// Do something with the retrieved data.</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">}</span></span>
<span class="line"></span></code></pre>
<p><strong>Django</strong></p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #6A737D"># Good</span></span>
<span class="line"><span style="color: #24292E">Users.objects.filter(</span><span style="color: #E36209">email</span><span style="color: #D73A49">=</span><span style="color: #24292E">email)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D"># Good</span></span>
<span class="line"><span style="color: #24292E">Users.objects.raw(</span><span style="color: #032F62">"select * from users where email = </span><span style="color: #005CC5">%s</span><span style="color: #032F62">"</span><span style="color: #24292E">, [email])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D"># Liable to got hacked</span></span>
<span class="line"><span style="color: #24292E">Users.objects.raw(</span><span style="color: #032F62">"select * from users where email = '</span><span style="color: #005CC5">%s</span><span style="color: #032F62">'"</span><span style="color: #24292E"> </span><span style="color: #D73A49">%</span><span style="color: #24292E"> email)</span></span>
<span class="line"></span></code></pre>
<p><strong>Node</strong></p>
<pre class="shiki" style="background-color: #fff"><code><span class="line"><span style="color: #6A737D">// node-sql</span></span>
<span class="line"><span style="color: #D73A49">var</span><span style="color: #24292E"> sql </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">require</span><span style="color: #24292E">(</span><span style="color: #032F62">'sql'</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #D73A49">var</span><span style="color: #24292E"> query </span><span style="color: #D73A49">=</span><span style="color: #24292E"> user.</span><span style="color: #6F42C1">select</span><span style="color: #24292E">(user.</span><span style="color: #6F42C1">star</span><span style="color: #24292E">()))</span></span>
<span class="line"><span style="color: #24292E">                .</span><span style="color: #6F42C1">from</span><span style="color: #24292E">(user)</span></span>
<span class="line"><span style="color: #24292E">                .</span><span style="color: #6F42C1">where</span><span style="color: #24292E">(user.email.</span><span style="color: #6F42C1">equals</span><span style="color: #24292E">(email)).</span><span style="color: #6F42C1">toQuery</span><span style="color: #24292E">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// mysql</span></span>
<span class="line"><span style="color: #D73A49">var</span><span style="color: #24292E"> mysql </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">require</span><span style="color: #24292E">(</span><span style="color: #032F62">'mysql'</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #D73A49">var</span><span style="color: #24292E"> connection </span><span style="color: #D73A49">=</span><span style="color: #24292E"> mysql.</span><span style="color: #6F42C1">createConnection</span><span style="color: #24292E">({ host: </span><span style="color: #005CC5">HOST</span><span style="color: #24292E">, user: </span><span style="color: #005CC5">USERNAME</span><span style="color: #24292E">, password: </span><span style="color: #005CC5">PASSWORD</span><span style="color: #24292E"> });</span></span>
<span class="line"><span style="color: #24292E">connection.</span><span style="color: #6F42C1">connect</span><span style="color: #24292E">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">connection.</span><span style="color: #6F42C1">query</span><span style="color: #24292E">(</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #032F62">'select * from users where email = ?'</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">  [email],</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">function</span><span style="color: #24292E">(</span><span style="color: #E36209">err</span><span style="color: #24292E">, </span><span style="color: #E36209">rows</span><span style="color: #24292E">, </span><span style="color: #E36209">fields</span><span style="color: #24292E">) {</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6A737D">// Do something with the retrieved data.</span></span>
<span class="line"><span style="color: #24292E">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">connection.</span><span style="color: #6F42C1">end</span><span style="color: #24292E">();</span></span>
<span class="line"></span></code></pre>
<h4 id="hÃ£y-validation-tá»«-front-end-cho-tá»›i-back-end">HÃ£y validation tá»« Front-end cho tá»›i Back-end</h4>
<p><strong>Validation</strong> dá»¯ liá»‡u chÆ°a bao giá» lÃ  cÃ´ng viá»‡c thÃº vá»‹ <img src="/assets/emoji/okay.png" emoji /> tuy nhiÃªn viá»‡c validation 2 bÆ°á»›c giÃºp báº£o máº­t tá»‘t hÆ¡n, vÃ  Ä‘á»“ng thá»i cÅ©ng trÃ¡nh Ä‘Æ°á»£c cÃ¡c lá»—i láº·t váº·t khÃ´ng cáº§n thiáº¿t.</p>
<p>VÃ­ dá»¥ trÃªn front-end cÃ¡c field nháº­p vÃ o dá»¯ liá»‡u sá»‘, nÃªn dÃ¹ng input <code>number</code> thay vÃ¬ input <code>text</code>. CÃ¡c field báº¯t buá»™c thÃ¬ nÃªn <code>required</code>. Máº·c dÃ¹ trÃªn front-end cÃ³ thá»ƒ verify dá»¯ liá»‡u Ä‘áº§u vÃ o, nhÆ°ng attacker váº«n cÃ³ thá»ƒ ignore nhá»¯ng rule nÃ y Ä‘á»ƒ trá»±c tiáº¿p gá»­i dá»¯ liá»‡u vÃ o back-end, váº­y nÃªn trÃªn back-end chÃºng ta nÃªn verify láº¡i dá»¯ liá»‡u, nhÆ° kiá»ƒu <code>$age = (int)$_POST['age']</code>. Äiá»u nÃ y sáº½ trÃ¡nh Ä‘Æ°á»£c cÃ¡c yáº¿u tá»‘ gÃ¢y ra lá»—i khÃ´ng Ä‘Ã¡ng cÃ³.</p>
<h4 id="phÃ¢n-quyá»n-quáº£n-trá»‹">PhÃ¢n quyá»n quáº£n trá»‹</h4>
<p>MÃ¬nh tháº¥y ráº¥t nhiá»u báº¡n khi xÃ¢y dá»±ng project, thÆ°á»ng sá»­ dá»¥ng tÃ i khoáº£n <strong><code>root</code></strong> cá»§a DBMS Ä‘á»ƒ lÃ m táº¥t cáº£ má»i thá»©... ÄÃ³ lÃ  má»™t sai láº§m cá»±c ká»³ lá»›n. Pháº§n lá»›n cÃ¡c báº¡n Ä‘á»u chÆ°a hiá»ƒu má»©c Ä‘á»™ nghiÃªm trá»ng cá»§a váº¥n Ä‘á» nÃ y, váº¥n Ä‘á» nÃ y giáº£i thÃ­ch cÅ©ng khÃ³ hiá»ƒu, pháº£i trong trÆ°á»ng há»£p thá»±c táº¿ cÃ¡c báº¡n há»c Ä‘Æ°á»£c thÃ¬ dá»… nhá»› hÆ¡n.</p>
<p>Tuy nhiÃªn mÃ¬nh váº«n sáº½ Ä‘Æ°a ra má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n nhÆ° sau:</p>
<p>Khi báº¡n Ä‘Äƒng nháº­p, viá»‡c cáº§n lÃ m cá»§a database chá»‰ lÃ  vÃ o Ä‘á»c dá»¯ liá»‡u (quyá»n <strong>READ</strong>) Ä‘á»ƒ verify thÃ´ng tin. Trong khi cÃ¡c báº¡n láº¡i cáº¥p full quyá»n cho <strong>user</strong> cá»§a DBMS chá»‰ dÃ¹ng Ä‘á»ƒ Ä‘á»c... Giáº£ sá»­ form Ä‘Äƒng nháº­p trÃªn há»‡ thá»‘ng cÃ³ lá»— há»•ng SQL Injection, thÃ¬ viá»‡c attack tá»« cÃ¡i form login xoÃ¡ toÃ n bá»™ dá»¯ liá»‡u cá»§a báº¡n lÃ  Ä‘iá»u cá»±c ká»³ Ä‘Æ¡n giáº£n, cÃ²n náº¿u user tÆ°Æ¡ng tÃ¡c vá»›i database chá»‰ cÃ³ quyá»n Ä‘á»c, thÃ¬ attacker cÅ©ng chá»‰ cÃ³ thá»ƒ truy cáº­p tÃ i khoáº£n Ä‘Ã³ mÃ  thÃ´i.</p>
<p>NghÄ©a lÃ  báº¡n chá»‰ gáº·p má»™t nguy cÆ¡ nhá» hÆ¡n so vá»›i cÃ¡i nguy cÆ¡ cá»±c ká»³ khá»§ng khiáº¿p kia.</p>
<p>ÄÃ³, khÃ´ng pháº£i tá»± dÆ°ng mÃ  <strong>Oracle</strong> Ä‘Æ°á»£c cho lÃ  há»‡ quáº£n trá»‹ database SQL báº£o máº­t nháº¥t, lÃ½ do lÃ  vÃ¬ phÃ¢n quyá»n cá»§a <strong>Oracle</strong> cá»±c ká»³ cháº·t cháº½. Do Ä‘Ã³, tá»‘t nháº¥t nÃªn phÃ¢n quyá»n cho cÃ¡c user trong DBMS má»™t cÃ¡ch cháº·t cháº½ vÃ  há»£p lÃ½, Ä‘á»ƒ trÃ¡nh há»‘i háº­n vá» lÃ¢u vá» dÃ i.</p>
<p>Váº¥n Ä‘á» phÃ¢n quyá»n khÃ´ng pháº£i chá»‰ á»Ÿ trong DBMS, mÃ  cÃ²n á»Ÿ trong cáº£ há»‡ thá»‘ng, vÃ  cáº¥u hÃ¬nh <strong>server</strong>. Nháº¯c láº¡i láº§n ná»¯a: <strong>PhÃ¢n quyá»n cá»±c ká»³ quan trá»ng</strong></p>
<p></p>
<h2 id="káº¿t-luáº­n">Káº¿t luáº­n</h2>
<p>SQL Injection khÃ´ng pháº£i má»™t váº¥n Ä‘á» má»›i máº», nÃ³ tá»“n táº¡i cáº£ má»™t tháº­p ká»· rá»“i nhÆ°ng nÃ³ váº«n Ä‘á»©ng Ä‘áº§u báº£ng xáº¿p háº¡ng vá» cÃ¡c lá»— há»•ng nguy hiá»ƒm nháº¥t trong nhiá»u nÄƒm liá»n. Chá»‰ vá»›i má»™t vÃ i bÆ°á»›c dá»… dÃ ng, há»‡ thá»‘ng cá»§a báº¡n cÃ³ thá»ƒ bá»‹ tÃª liá»‡t hoÃ n toÃ n... Chá»‘ng thÃ¬ khÃ³, mÃ  phÃ¡ thÃ¬ dá»… láº¯m.</p>
<p>NÃªn nhá»›:</p>
<blockquote>
<p>Äáº¡o cao má»™t thÆ°á»›c, ma cao má»™t trÆ°á»£ng.</p>
</blockquote></div></article></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Máº¥y cÃ¡i trÃ² Database Hacking","date":"Mar 15, 2020","slug":"sql-database-hacking","content":"\u003cp\u003eHÃ´m ná» mÃ¬nh vá»«a Ä‘á»c Ä‘Æ°á»£c má»™t bÃ i write-up cá»§a má»™t báº¡n white-hat sau khi bÃ¡o cÃ¡o láº¡i lá»— há»•ng SQL Injection trÃªn trang web cá»§a Äáº¡i há»c Harvard, tá»± dÆ°ng tháº¥y ká»¹ nÄƒng vá» báº£o máº­t cá»§a mÃ¬nh bao lÃ¢u nay... kÃ©m ghÃª.\u003c/p\u003e\n\u003cp\u003eBáº£n thÃ¢n lÃ  sinh viÃªn chuyÃªn ngÃ nh \u003cstrong\u003eHá»‡ Thá»‘ng ThÃ´ng Tin\u003c/strong\u003e, tá»©c lÃ  chuyÃªn ngá»“i Ä‘áº¥u váº­t vá»›i máº¥y cÃ¡i cÆ¡ sá»Ÿ dá»¯ liá»‡u mÃ  láº¡i ráº¥t hay quÃªn Ä‘i nhá»¯ng cÃ¡i quan trá»ng nhÆ° tháº¿ nÃ y... Cáº£m tháº¥y xáº¥u há»•, tháº¿ lÃ  mÃ¬nh pháº£i mÃ² láº¡i nhá»¯ng gÃ¬ mÃ¬nh Ä‘Ã£ há»c, nhÆ°ng khÃ´ng dÃ¹ng tá»›i láº¡i quÃªn máº¥t, rá»“i viáº¿t thÃ nh má»™t blog Ä‘á»ƒ coi nhÆ° vá»«a há»c láº¡i, vá»«a chia sáº» kiáº¿n thá»©c cho má»i ngÆ°á»i \u003cimg src=\"/assets/emoji/smug.png\" emoji /\u003e \u003cdel\u003eMÃ¬nh tháº­t tuyá»‡t\u003c/del\u003e\u003c/p\u003e\n\u003ch2 id=\"tháº±ng-chÃ³-mÃ y-hack-web-bá»‘-mÃ y\"\u003eTháº±ng chÃ³, mÃ y hack web bá»‘ mÃ y...\u003c/h2\u003e\n\u003cp\u003eHÃ¨ vá»«a rá»“i mÃ¬nh cÃ³ trÃ² chuyá»‡n vá»›i má»™t Ã´ng anh trong nghá», á»•ng tÃ¢m sá»± vá» chuyá»‡n bá»‹ tháº±ng nÃ o tháº£ bot nÃ³ clean máº¹ cÃ¡i database, Ä‘á»ƒ láº¡i Ä‘Ãºng má»™t dÃ²ng duy nháº¥t:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eGá»­i bá»‘ mÃ y vÃ i Bitcoin Ä‘Ãª, bá»‘ mÃ y tráº£ láº¡i dá»¯ liá»‡u cho... \u003cimg src=\"/assets/emoji/look_down.png\" emoji /\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eVÃ  kÃ¨m theo Ä‘Ã³ lÃ  Ä‘á»‹a chá»‰ vÃ­ bitcoin cá»§a háº¯n \u003cimg src=\"/assets/emoji/surrender.png\" emoji /\u003e TÃ­nh Ã´ng anh mÃ¬nh Ä‘Æ°á»£c cÃ¡i tháº­t thÃ , nhÃ  cÅ©ng khÃ´ng cÃ³ gÃ¬ ngoÃ i Ä‘iá»u kiá»‡n, tháº¿ lÃ  gá»­i cho nÃ³ vÃ i bitcoin coi nhÆ° tiá»n Äƒn sÃ¡ng, hÃ´m sau tháº¥y nÃ³ restore láº¡i dá»¯ liá»‡u tháº­t \u003cimg src=\"/assets/emoji/mokas.png\" emoji /\u003e\u003c/p\u003e\n\u003cp\u003eNhÆ°ng mÃ  tá»©c quÃ¡, ai Ä‘á»i lÃ m láº­p trÃ¬nh cÃ³ sáº£n pháº©m Ä‘ang cháº¡y phÃ  phÃ  láº¡i cÃ³ tháº±ng choÃ¡ nÃ o hack, nghÄ© cÃ³ cay khÃ´ng cÆ¡ chá»©? \u003cimg src=\"/assets/emoji/yikes.png\" emoji /\u003e\u003c/p\u003e\n\u003cp\u003eMÃ¬nh khÃ´ng rÃµ lÃ  cÃ¡i database Ä‘Ã³ bá»‹ hack nhÆ° tháº¿ nÃ o, nhÆ°ng khÃ¡ cháº¯c cháº¯n pháº§n lá»›n lÃ  bá»Ÿi vÃ¬ code chÆ°a Ä‘á»§ báº£o máº­t vÃ  cÃ³ nhiá»u lá»— há»•ng. CÃ¡c hacker sáº½ viáº¿t má»™t con bot chuyÃªn Ä‘i dáº¡o trÃªn máº¡ng Ä‘á»ƒ attack vÃ o nhá»¯ng case báº£o máº­t thÆ°á»ng dá»… bá»‹ hack nháº¥t.\u003c/p\u003e\n\u003cp\u003eVÃ¬ váº­y bÃ i viáº¿t nÃ y mÃ¬nh sáº½ giá»›i thiá»‡u cho cÃ¡c báº¡n má»™t loáº¡i lá»— há»•ng \u003cstrong\u003ecÆ¡ báº£n\u003c/strong\u003e nhÆ°ng cá»±c ká»³ nguy hiá»ƒm, giáº£i thÃ­ch cÆ¡ cháº¿ vÃ  hÆ°á»›ng dáº«n cÃ¡ch phÃ²ng chá»‘ng. VÃ  xin giá»›i thiá»‡u cÃ¡i trÃ² gá»i lÃ  \u003cstrong\u003eSQL Injection\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eLÆ°u Ã½:\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eBÃ i viáº¿t nÃ y nháº±m má»¥c Ä‘Ã­ch giao lÆ°u ká»¹ nÄƒng báº£o máº­t láº­p trÃ¬nh, khÃ´ng cá»• suÃ½ cÃ¡c báº¡n Ä‘i phÃ¡ lÃ ng phÃ¡ xÃ³m. HÃ£y tá»‰nh tÃ¡o \u003cimg src=\"/assets/emoji/smug.png\" emoji /\u003e\u003c/p\u003e\n\u003ch2 id=\"nháº­p-mÃ´n-hack-cÆ¡-sá»Ÿ-dá»¯-liá»‡u-sql\"\u003eNháº­p mÃ´n hack CÆ¡ sá»Ÿ dá»¯ liá»‡u SQL\u003c/h2\u003e\n\u003cp\u003eTrong nhiá»u loáº¡i táº¥n cÃ´ng lá»— há»•ng nháº±m vÃ o website, táº¥n cÃ´ng \u003cstrong\u003eSQL Injection\u003c/strong\u003e lÃ  má»™t trong nhá»¯ng loáº¡i nguy hiá»ƒm vÃ  phá»• biáº¿n nháº¥t. NÃ³ Ä‘Ã£ tá»«ng gÃ¢y ra nhiá»u thiá»‡t háº¡i Ä‘Ã¡ng ká»ƒ cho nhiá»u doanh nghiá»‡p vÃ  tá»• chá»©c trong ráº¥t nhiá»u nÄƒm, vÃ  Ä‘Æ°Æ¡ng nhiÃªn sáº½ cÃ²n tiáº¿p diá»…n trong tÆ°Æ¡ng lai.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eTheo \u003ca href=\"https://vi.wikipedia.org/wiki/SQL_injection\"\u003eWikipedia\u003c/a\u003e \u003cimg src=\"/assets/emoji/popcorn.png\" emoji /\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eSQL injection\u003c/strong\u003e lÃ  má»™t ká»¹ thuáº­t cho phÃ©p nhá»¯ng káº» táº¥n cÃ´ng lá»£i dá»¥ng lá»— há»•ng cá»§a viá»‡c kiá»ƒm tra dá»¯ liá»‡u Ä‘áº§u vÃ o trong cÃ¡c á»©ng dá»¥ng web vÃ  cÃ¡c thÃ´ng bÃ¡o lá»—i cá»§a há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u tráº£ vá» Ä‘á»ƒ \u003cem\u003einject\u003c/em\u003e (\u003cem\u003etiÃªm vÃ o\u003c/em\u003e) vÃ  thi hÃ nh cÃ¡c cÃ¢u lá»‡nh SQL báº¥t há»£p phÃ¡p.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eá»œ thÃ¬ khÃ¡i niá»‡m nhÆ° váº­y Ä‘áº¥y, hiá»ƒu má»™t cÃ¡ch Ä‘Æ¡n giáº£n tá»©c lÃ  loáº¡i táº¥n cÃ´ng nÃ y nháº±m vÃ o cÃ¡c \u003cstrong\u003einput\u003c/strong\u003e cÃ³ \u003cstrong\u003etÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p\u003c/strong\u003e vá»›i \u003cstrong\u003edatabase\u003c/strong\u003e á»Ÿ \u003cstrong\u003eback-end\u003c/strong\u003e (vÃ­ dá»¥ nhÆ° cÃ¡c input email, password á»Ÿ form login). ThÃ´ng thÆ°á»ng, attacker sáº½ táº¥n cÃ´ng Ä‘á»ƒ Äƒn cáº¯p dá»¯ liá»‡u, loáº¡i nÃ y vá» cÆ¡ báº£n lÃ  hiá»n nháº¥t, sau Ä‘Ã³ tá»›i xÃ¡o trá»™n dá»¯ liá»‡u Ä‘á»ƒ cáº£n trá»Ÿ sá»± hoáº¡t Ä‘á»™ng cá»§a website, vÃ  trÆ°á»ng há»£p xáº¥u nháº¥t, lÃ  quyá»n truy cáº­p quáº£n trá»‹ vÃ o mÃ¡y chá»§ database bá»‹ chiáº¿m. \u003cimg src=\"/assets/emoji/moka.png\" emoji /\u003e\u003c/p\u003e\n\u003cp\u003eTrong lá»‹ch sá»­, Ä‘Ã£ cÃ³ ráº¥t nhiá»u Ä‘á»£t táº¥n cÃ´ng SQL Injection nháº±m má»¥c Ä‘Ã­ch:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTrÃ­ch xuáº¥t thÃ´ng tin nháº¡y cáº£m, vÃ­ dá»¥ nhÆ° vá» an sinh xÃ£ há»™i, hay thÃ´ng tin tháº» tÃ­n dá»¥ng\u003c/li\u003e\n\u003cli\u003eTrÃ­ch xuáº¥t thÃ´ng tin ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ trÃªn cÃ¡c website, á»Ÿ Viá»‡t Nam cÅ©ng khÃ´ng Ã­t trÆ°á»ng há»£p\u003c/li\u003e\n\u003cli\u003eXoÃ¡ luÃ´n cÃ¡i database, cÃ³ ráº¥t nhiá»u trang web khÃ´ng sá»­ dá»¥ng backup dá»¯ liá»‡u, vÃ  khi bá»‹ xoÃ¡ thÃ¬ coi nhÆ° cáº£ há»‡ thá»‘ng tÃª liá»‡t, vÃ­ dá»¥ cá»§a Ã´ng anh bÃªn trÃªn lÃ  vÃ­ dá»¥ gáº§n gÅ©i nháº¥t\u003c/li\u003e\n\u003cli\u003eTiÃªm mÃ£ Ä‘á»™c thá»±c thi vÃ o trang web khi ngÆ°á»i dÃ¹ng truy cáº­p\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eNháº¯c láº¡i má»™t láº§n ná»¯a:\u003c/strong\u003e Táº¥n cÃ´ng vá» SQL Injection cá»±c ká»³ phá»• biáº¿n. CÃ¡c cÃ´ng ty lá»›n nhÆ° \u003cstrong\u003eYahoo\u003c/strong\u003e hay \u003cstrong\u003eSony\u003c/strong\u003e Ä‘Ã£ tá»«ng lÃ  nháº¡n nhÃ¢n cá»§a trÃ² chÆ¡i nÃ y. CÃ¡c nhÃ³m hacker cÃ²n viáº¿t háº³n cÃ¡c script bot Ä‘á»ƒ tá»± Ä‘i táº¥n cÃ´ng dáº¡o trÃªn internet, vÃ¬ váº­y hÃ£y luÃ´n cáº©n tháº­n vá»›i sáº£n pháº©m cá»§a báº¡n.\u003c/p\u003e\n\u003ch3 id=\"cÆ¡-cháº¿-khai-thÃ¡c-vÃ -táº¥n-cÃ´ng\"\u003eCÆ¡ cháº¿ khai thÃ¡c vÃ  táº¥n cÃ´ng\u003c/h3\u003e\n\u003cp\u003eSQL Injection táº¥n cÃ´ng báº±ng cÃ¡ch gá»­i má»™t mÃ£ lá»‡nh SQL Ä‘á»™c Ä‘áº¿n back-end cá»§a mÃ¡y chá»§ cÆ¡ sá»Ÿ Ä‘á»¯ liá»‡u, thÃ´ng qua cÃ¡c request cá»§a ngÆ°á»i dÃ¹ng mÃ  website cho phÃ©p. Báº¥t ká»³ input nÃ o cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ gá»­i mÃ£ Ä‘á»™c, tá»©c lÃ  bao gá»“m cáº£: cÃ¡c tháº» \u003ccode\u003e\u0026#x3C;input\u003e\u003c/code\u003e nháº­p liá»‡u, query strings, cookies vÃ  file upload.\u003c/p\u003e\n\u003cp\u003eMÃ¬nh sáº½ cÃ³ má»™t vÃ­ dá»¥ nhÆ° sau: Giáº£ sá»­ Ä‘Ã¢y lÃ  trang Ä‘Äƒng nháº­p vÃ o ngÃ¢n hÃ ng \u003cstrong\u003ePankHub\u003c/strong\u003e, vá»›i form Ä‘Äƒng nháº­p gá»“m 2 fields lÃ  \u003ccode\u003eemail\u003c/code\u003e vÃ  \u003ccode\u003epassword\u003c/code\u003e:\u003c/p\u003e\n\u003cp\u003eBÃ¢y giá» mÃ¬nh sáº½ thá»­ Ä‘Äƒng nháº­p tÃ i khoáº£n cá»§a ngÆ°á»i dÃ¹ng tÃªn lÃ  \u003cstrong\u003ePhÃ¡t\u003c/strong\u003e (jk, don't panic) vá»›i \u003cem\u003eemail\u003c/em\u003e lÃ : \u003ccode\u003ephat.nhagiau@pankhub.com\u003c/code\u003e vÃ  \u003cem\u003epassword\u003c/em\u003e lÃ  \u003ccode\u003epassword\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eá»ª thÃ¬ Ä‘Æ°Æ¡ng nhiÃªn lÃ  khÃ´ng Ä‘Äƒng nháº­p Ä‘Æ°á»£c rá»“i \u003cimg src=\"/assets/emoji/okay.png\" emoji /\u003e ÄÃ¢y lÃ  trÆ°á»ng há»£p giáº£ sá»­ mÃ¬nh lÃ  má»™t attacker, vÃ  mÃ¬nh tÃ¬nh cá» Ä‘á»‹a Ä‘Æ°á»£c email cá»§a ngÆ°á»i dÃ¹ng nÃ y sau khi Ä‘i ngang qua lÃºc nÃ³ Ä‘ang Ä‘Äƒng nháº­p vÃ o ngÃ¢n hÃ ng á»Ÿ tiá»‡m net \u003cimg src=\"/assets/emoji/smug.png\" emoji /\u003e Victim cá»§a mÃ¬nh lÃ  má»™t tháº±ng Ä‘áº¡i gia nhÃ  giÃ u, tiá»n khÃ´ng nhá»¯ng Ä‘Æ°á»£c quy ra báº±ng vÃ ng Ä‘á»ƒ trong kÃ©t mÃ  cÃ²n cÃ³ cáº£ má»™t Ä‘á»‘ng trong nhÃ  bÄƒng. XÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c má»¥c tiÃªu thÃ¬ trÃ­ch xuáº¥t thÃ´ng tin má»¥c tiÃªu lÃ  Ä‘iá»u cáº§n thiáº¿t. VÃ¬ váº­y mÃ¬nh chá»‰ thá»­ Ä‘Äƒng nháº­p cho vui thÃ´i, Ä‘Æ°Æ¡ng nhiÃªn lÃ m gÃ¬ cÃ³ tháº±ng \u003cdel\u003engu\u003c/del\u003e nÃ o Ä‘áº·t máº­t kháº©u lÃ  \u003ccode\u003epassword\u003c/code\u003e cÆ¡ chá»© (jk)\u003c/p\u003e\n\u003cp\u003eBÃ¢y giá» hÃ£y nhÃ¬n váº¥n Ä‘á» tá»« phÃ­a server log nhÃ©, chÃºng ta sáº½ cÃ³ 1 cÃ¡i logging nhÆ° sau:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eRendering login page.\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\nFinding user in database.\nNo such user, report this to the user (invalid credentials?).\nRendering login page.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSau Ä‘Ã³, mÃ¬nh tiáº¿p tá»¥c truy thá»­ login vÃ o tÃ i khoáº£n cá»§a victim, nhÆ°ng láº§n nÃ y password mÃ¬nh sáº½ thÃªm má»™t \u003cem\u003edáº¥u nhÃ¡y Ä‘Æ¡n\u003c/em\u003e \u003ccode\u003e'\u003c/code\u003e, káº¿t quáº£ cÃ³ Ä‘Æ°á»£c lÃ :\u003c/p\u003e\n\u003cp\u003eTháº¥y sá»± khÃ¡c biá»‡t rá»“i pháº£i khÃ´ng? ThÃ´ng thÆ°á»ng, vá»›i nhá»¯ng trÆ°á»ng há»£p sai thÃ´ng tin Ä‘Äƒng nháº­p sáº½ luÃ´n cho ra má»™t message lá»—i (trang nÃ o nÃ³ random message thÃ¬ bÃ³ tay), vÃ¬ váº­y cÃ³ gÃ¬ Ä‘Ã³ khÃ´ng Ä‘Ãºng xáº£y ra rá»“i, cÃ³ thá»ƒ nguyÃªn do lÃ  bá»Ÿi dáº¥u nhÃ¡y Ä‘Æ¡n chÄƒng?\u003c/p\u003e\n\u003cp\u003eServer log:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\n\nRendering login page.\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\nFinding user in database.\nAn error occurred: PG::SyntaxError: ERROR: unterminated quoted string at or near \"'password'' limit 1\" LINE 1: ...ers where email = 'phat.nhagiau@pankhub.com' and password = 'password'... ^ : select * from users where email = 'phat.nhagiau@pankhub.com' and password = 'password'' limit 1.\nUnable to login this user due to unexpected error.\nRendering login page.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNhÃ¬n tháº¥y á»Ÿ log hiá»ƒn thá»‹ SQL syntax error chá»©? Äiá»u nÃ y chá»©ng tá» dáº¥u nhÃ¡y Ä‘Æ¡n chÃ­nh lÃ  nguyÃªn nhÃ¢n gÃ¢y ra lá»—i. Thá»­ ghÃ©p vÃ o cÃ¢u lá»‡nh SQL Ä‘Æ°á»£c cháº¡y trÃªn server thÃ¬ nÃ³ sáº½ trÃ´ng nhÆ° tháº¿ nÃ y:\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e users\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e email \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'phat.nhagiau@pankhub.com'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eAND\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e pass  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'password'' LIMIT 1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDÆ° 1 dáº¥u nhÃ¡y Ä‘Æ¡n, cÃ¢u lá»‡nh nÃ y cháº¡y trong SQL cháº¯c cháº¯n sáº½ lá»—i. VÃ  Ä‘Ã¢y chÃ­nh lÃ  thá»© gá»i lÃ  \u003cstrong\u003eSQL Injection\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eSau khi xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c lá»— há»•ng, mÃ¬nh sáº½ thá»­ Ä‘Äƒng nháº­p láº¡i vá»›i password lÃ  \u003cstrong\u003e\u003ccode\u003e' OR 1=1--\u003c/code\u003e\u003c/strong\u003e. CÃ¢u lá»‡nh SQL lÃºc nÃ y Ä‘Æ°á»£c thá»±c thi trÃªn server sáº½ lÃ :\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e users\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e email \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'phat.nhagiau@pankhub.com'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eAND\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e pass  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e''\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eOR\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6A737D\"\u003e--' LIMIT 1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eServer log:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eRendering login page.\nChecking supplied authentication details for phat.nhagiau@pankhub.com.\nFinding user in database.\nAuthentication details confirmed, establishing session for this user.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eXong, tÃ i khoáº£n cá»§a báº¡n náº±m trong tay tÃ´i \u003cimg src=\"/assets/emoji/ok.png\" emoji /\u003e\u003c/p\u003e\n\u003cp\u003eCÆ¡ cháº¿ hoáº¡t Ä‘á»™ng Ä‘Æ¡n giáº£n nháº¥t cá»§a \u003cstrong\u003eSQL Injection\u003c/strong\u003e lÃ  nhÆ° váº­y Ä‘á». Thá»±c thi nÃ³ khÃ´ng há» khÃ³, nhÆ°ng Ä‘á»ƒ nháº­n ra Ä‘Æ°á»£c trang nÃ o cÃ³ lá»— há»•ng thÃ¬ láº¡i khÃ¡ khÃ³, vÃ¬ khÃ´ng pháº£i lÃºc nÃ o khai thÃ¡c lá»— há»•ng SQL Injection nÃ³ cÅ©ng y chang nhÆ° váº­y.\u003c/p\u003e\n\u003ch3 id=\"nhÆ°ng-táº¡i-sao-cÃ³-lá»—-há»•ng-nÃ y\"\u003eNhÆ°ng táº¡i sao cÃ³ lá»— há»•ng nÃ y?\u003c/h3\u003e\n\u003cp\u003eLÃ½ do lá»›n nháº¥t lÃ  cÃ¡c báº¡n chÆ°a thá»ƒ tiáº¿p cáº­n toÃ n bá»™ cÃ¡c case trong quÃ¡ trÃ¬nh code. Báº¡n khÃ´ng bao giá» lÆ°á»ng trÆ°á»›c Ä‘Æ°á»£c ngÆ°á»i dÃ¹ng sáº½ lÃ m cÃ¡i \u003cdel\u003eÄ‘Ã©o\u003c/del\u003e gÃ¬ trÃªn sáº£n pháº©m cá»§a mÃ¬nh. \u003cimg src=\"/assets/emoji/sad.png\" emoji /\u003e ChÃ­nh vÃ¬ váº­y thÆ°á»ng cÃ¡c case khÃ´ng bao giá» Ä‘Æ°á»£c nghÄ© tá»›i nÃ y láº¡i vÃ´ tÃ¬nh táº¡o ra lá»— há»•ng cho attacker khai thÃ¡c.\u003c/p\u003e\n\u003cp\u003eKhi viáº¿t cÃ¡c cÃ¢u lá»‡nh SQL trong source (á»Ÿ Ä‘Ã¢y mÃ¬nh sáº½ láº¥y \u003cstrong\u003ePHP\u003c/strong\u003e lÃ m vÃ­ dá»¥), Ä‘a sá»‘ cÃ¡c báº¡n thÆ°á»ng viáº¿t kiá»ƒu:\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$query \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e USERS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e email \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $_POST[\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'email'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #032F62\"\u003e  AND password = '\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $_POST[\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'password'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e] \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #032F62\"\u003e  LIMIT 1;\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$result \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $connection\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003equery\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e($sql);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eKhi ngÆ°á»i dÃ¹ng gá»­i request Ä‘Äƒng nháº­p cÃ³ thÃ´ng tin, thÃ¬ cÃ¢u query trÃªn sáº½ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i:\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e USERS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e email \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'phat.nhagiau@pankhub.com'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eAND\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003epassword\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'password'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eLIMIT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTá»©c lÃ  cÃ¡i gÃ¬ gá»­i lÃªn, thÃ¬ param tÆ°Æ¡ng Ä‘Æ°Æ¡ng sáº½ Ä‘Æ°á»£c thay tháº¿ báº±ng cÃ¡i Ä‘Ã³. Äiá»u nÃ y vÃ´ tÃ¬nh táº¡o ra má»™t lá»— há»•ng cá»±c ká»³ nguy hiá»ƒm. Náº¿u báº¡n tá»«ng há»c cÃ¡c mÃ´n liÃªn quan tá»›i database hoáº·c lÃ m viá»‡c vá»›i database nhiá»u, cÃ¡c báº¡n cÃ³ thá»ƒ hiá»ƒu ráº±ng chá»‰ vá»›i nhá»¯ng cÃ¢u lá»‡nh SQL thÃ´i cÅ©ng Ä‘á»§ Ä‘á»ƒ chÃºng lÃ m báº¥t cá»© thá»© gÃ¬ liÃªn quan tá»›i dá»¯ liá»‡u.\u003c/p\u003e\n\u003cp\u003eKhÃ´ng nhá»¯ng tháº¿, SQL Injection cÃ²n cÃ³ thá»ƒ thá»±c thi Ä‘Æ°á»£c mÃ£ HTML hoáº·c PHP trong nhiá»u trÆ°á»ng há»£p. ÄÃ³ lÃ  lÃ½ do táº¡i sao lá»— há»•ng nÃ y nghiÃªm trá»ng nhÆ° váº­y.\u003c/p\u003e\n\u003ch3 id=\"chá»‘ng-injection-nhÆ°-tháº¿-nÃ o\"\u003eChá»‘ng injection nhÆ° tháº¿ nÃ o?\u003c/h3\u003e\n\u003ch4 id=\"truy-váº¥n-tham-sá»‘-parameterized-statements\"\u003eTruy váº¥n tham sá»‘ (Parameterized Statements)\u003c/h4\u003e\n\u003cp\u003eÄa sá»‘ cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh há»— trá»£ truy váº¥n SQL Ä‘á»u sáº½ há»— trá»£ cháº¡y cÃ¡c cÃ¢u lá»‡nh SQL báº±ng cÃ¡ch táº¡o truy váº¥n Ä‘á»ƒ trÃ­ch xuáº¥t cÃ¡c tham sá»‘ khi cáº§n thiáº¿t. CÃ¡c cÃ¢u lá»‡nh nÃªn Ä‘Æ°á»£c \u003cem\u003etham sá»‘ hoÃ¡\u003c/em\u003e Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng cÃ¡c \u003cem\u003etham sá»‘\u003c/em\u003e (tá»©c lÃ  \u003cem\u003edá»¯ liá»‡u Ä‘áº§u vÃ o\u003c/em\u003e) Ä‘Æ°a vÃ o cÃ¢u lá»‡nh SQL Ä‘Æ°á»£c xá»­ lÃ½ má»™t cÃ¡ch an toÃ n nháº¥t.\u003c/p\u003e\n\u003cp\u003eVá»›i vÃ­ dá»¥ á»Ÿ \u003ca href=\"#nh%c6%b0ng-t%e1%ba%a1i-sao-c%c3%b3-l%e1%bb%97-h%e1%bb%95ng-n%c3%a0y\"\u003epháº§n trÃªn\u003c/a\u003e, chÃºng ta sáº½ thá»­ Ä‘Æ°a nÃ³ vá» dáº¡ng truy váº¥n tham sá»‘:\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// CÃ¢u lá»‡nh SQL chá» tham sá»‘\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$sql \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e USERS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e email \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e ?\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eAND\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003epassword\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e ?\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eLIMIT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// Chuáº©n bá»‹ vÃ  rÃ ng buá»™c\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$stmt \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $connection\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eprepare\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e($sql);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$stmt\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003ebind_param\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"ss\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, $email, $password);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// Truyá»n tham sá»‘ vÃ  thá»±c thi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$email \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $_POST[\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'email'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$password \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $_POST[\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'password'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$stmt\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eexecute\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// Äá»«ng quÃªn close connection má»—i láº§n thá»±c thi xong\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$stmt\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eclose\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$conn\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eclose\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDáº¡ng \u003cstrong\u003ebind\u003c/strong\u003e param nÃ y cháº¯c cÃ³ láº½ sáº½ khÃ³ Ä‘á»ƒ truyá»n tham sá»‘ khi sá»‘ lÆ°á»£ng column cáº§n dÃ¹ng trong query trá»Ÿ nÃªn nhiá»u hÆ¡n, váº­y nÃªn cÃ²n cÃ³ cÃ¡ch nhÆ° sau:\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// CÃ¢u lá»‡nh SQL chá» tham sá»‘\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$sql \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e USERS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e email \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e :email\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eAND\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003epassword\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e :\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003epassword\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eLIMIT\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// Chuáº©n bá»‹ vÃ  rÃ ng buá»™c\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$stmt \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $connection\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eprepare\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e($sql);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$stmt\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003ebindParam\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\":email\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, $email);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$stmt\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003ebindParam\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\":password\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, $password);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// Truyá»n tham sá»‘ vÃ  thá»±c thi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$email \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $_POST[\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'email'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$password \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e $_POST[\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'password'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e$stmt\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eexecute\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eVÃ­ dá»¥ trong má»™t sá»‘ ngÃ´n ngá»¯ khÃ¡c:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eC#\u003c/strong\u003e\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// Create the SQL command.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003eSqlCommand\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003ecommand\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eSqlCommand\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"select * from users where email = @email\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, conn);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// Add the parameter values in separately.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003ecommand.Parameters.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eAdd\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eSqlParameter\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"email\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, email);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6F42C1\"\u003eusing\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e (SqlDataReader reader \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e command.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eExecuteReader\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003ewhile\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e (reader.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eRead\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #6A737D\"\u003e// Do something with the retrieved data.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eDjango\u003c/strong\u003e\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e# Good\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003eUsers.objects.filter(\u003c/span\u003e\u003cspan style=\"color: #E36209\"\u003eemail\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003eemail)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e# Good\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003eUsers.objects.raw(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"select * from users where email = \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e%s\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, [email])\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e# Liable to got hacked\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003eUsers.objects.raw(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"select * from users where email = '\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e%s\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e email)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eNode\u003c/strong\u003e\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #fff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// node-sql\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003evar\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e sql \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'sql'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003evar\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e query \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e user.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eselect\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(user.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003estar\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e()))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e                .\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(user)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e                .\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003ewhere\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(user.email.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eequals\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(email)).\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003etoQuery\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A737D\"\u003e// mysql\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003evar\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e mysql \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'mysql'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003evar\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e connection \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e mysql.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003ecreateConnection\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e({ host: \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eHOST\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, user: \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eUSERNAME\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, password: \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003ePASSWORD\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e });\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003econnection.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003econnect\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003econnection.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003equery\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e'select * from users where email = ?'\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  [email],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #E36209\"\u003eerr\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E36209\"\u003erows\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #E36209\"\u003efields\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #6A737D\"\u003e// Do something with the retrieved data.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  });\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003econnection.\u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003eend\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"hÃ£y-validation-tá»«-front-end-cho-tá»›i-back-end\"\u003eHÃ£y validation tá»« Front-end cho tá»›i Back-end\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eValidation\u003c/strong\u003e dá»¯ liá»‡u chÆ°a bao giá» lÃ  cÃ´ng viá»‡c thÃº vá»‹ \u003cimg src=\"/assets/emoji/okay.png\" emoji /\u003e tuy nhiÃªn viá»‡c validation 2 bÆ°á»›c giÃºp báº£o máº­t tá»‘t hÆ¡n, vÃ  Ä‘á»“ng thá»i cÅ©ng trÃ¡nh Ä‘Æ°á»£c cÃ¡c lá»—i láº·t váº·t khÃ´ng cáº§n thiáº¿t.\u003c/p\u003e\n\u003cp\u003eVÃ­ dá»¥ trÃªn front-end cÃ¡c field nháº­p vÃ o dá»¯ liá»‡u sá»‘, nÃªn dÃ¹ng input \u003ccode\u003enumber\u003c/code\u003e thay vÃ¬ input \u003ccode\u003etext\u003c/code\u003e. CÃ¡c field báº¯t buá»™c thÃ¬ nÃªn \u003ccode\u003erequired\u003c/code\u003e. Máº·c dÃ¹ trÃªn front-end cÃ³ thá»ƒ verify dá»¯ liá»‡u Ä‘áº§u vÃ o, nhÆ°ng attacker váº«n cÃ³ thá»ƒ ignore nhá»¯ng rule nÃ y Ä‘á»ƒ trá»±c tiáº¿p gá»­i dá»¯ liá»‡u vÃ o back-end, váº­y nÃªn trÃªn back-end chÃºng ta nÃªn verify láº¡i dá»¯ liá»‡u, nhÆ° kiá»ƒu \u003ccode\u003e$age = (int)$_POST['age']\u003c/code\u003e. Äiá»u nÃ y sáº½ trÃ¡nh Ä‘Æ°á»£c cÃ¡c yáº¿u tá»‘ gÃ¢y ra lá»—i khÃ´ng Ä‘Ã¡ng cÃ³.\u003c/p\u003e\n\u003ch4 id=\"phÃ¢n-quyá»n-quáº£n-trá»‹\"\u003ePhÃ¢n quyá»n quáº£n trá»‹\u003c/h4\u003e\n\u003cp\u003eMÃ¬nh tháº¥y ráº¥t nhiá»u báº¡n khi xÃ¢y dá»±ng project, thÆ°á»ng sá»­ dá»¥ng tÃ i khoáº£n \u003cstrong\u003e\u003ccode\u003eroot\u003c/code\u003e\u003c/strong\u003e cá»§a DBMS Ä‘á»ƒ lÃ m táº¥t cáº£ má»i thá»©... ÄÃ³ lÃ  má»™t sai láº§m cá»±c ká»³ lá»›n. Pháº§n lá»›n cÃ¡c báº¡n Ä‘á»u chÆ°a hiá»ƒu má»©c Ä‘á»™ nghiÃªm trá»ng cá»§a váº¥n Ä‘á» nÃ y, váº¥n Ä‘á» nÃ y giáº£i thÃ­ch cÅ©ng khÃ³ hiá»ƒu, pháº£i trong trÆ°á»ng há»£p thá»±c táº¿ cÃ¡c báº¡n há»c Ä‘Æ°á»£c thÃ¬ dá»… nhá»› hÆ¡n.\u003c/p\u003e\n\u003cp\u003eTuy nhiÃªn mÃ¬nh váº«n sáº½ Ä‘Æ°a ra má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n nhÆ° sau:\u003c/p\u003e\n\u003cp\u003eKhi báº¡n Ä‘Äƒng nháº­p, viá»‡c cáº§n lÃ m cá»§a database chá»‰ lÃ  vÃ o Ä‘á»c dá»¯ liá»‡u (quyá»n \u003cstrong\u003eREAD\u003c/strong\u003e) Ä‘á»ƒ verify thÃ´ng tin. Trong khi cÃ¡c báº¡n láº¡i cáº¥p full quyá»n cho \u003cstrong\u003euser\u003c/strong\u003e cá»§a DBMS chá»‰ dÃ¹ng Ä‘á»ƒ Ä‘á»c... Giáº£ sá»­ form Ä‘Äƒng nháº­p trÃªn há»‡ thá»‘ng cÃ³ lá»— há»•ng SQL Injection, thÃ¬ viá»‡c attack tá»« cÃ¡i form login xoÃ¡ toÃ n bá»™ dá»¯ liá»‡u cá»§a báº¡n lÃ  Ä‘iá»u cá»±c ká»³ Ä‘Æ¡n giáº£n, cÃ²n náº¿u user tÆ°Æ¡ng tÃ¡c vá»›i database chá»‰ cÃ³ quyá»n Ä‘á»c, thÃ¬ attacker cÅ©ng chá»‰ cÃ³ thá»ƒ truy cáº­p tÃ i khoáº£n Ä‘Ã³ mÃ  thÃ´i.\u003c/p\u003e\n\u003cp\u003eNghÄ©a lÃ  báº¡n chá»‰ gáº·p má»™t nguy cÆ¡ nhá» hÆ¡n so vá»›i cÃ¡i nguy cÆ¡ cá»±c ká»³ khá»§ng khiáº¿p kia.\u003c/p\u003e\n\u003cp\u003eÄÃ³, khÃ´ng pháº£i tá»± dÆ°ng mÃ  \u003cstrong\u003eOracle\u003c/strong\u003e Ä‘Æ°á»£c cho lÃ  há»‡ quáº£n trá»‹ database SQL báº£o máº­t nháº¥t, lÃ½ do lÃ  vÃ¬ phÃ¢n quyá»n cá»§a \u003cstrong\u003eOracle\u003c/strong\u003e cá»±c ká»³ cháº·t cháº½. Do Ä‘Ã³, tá»‘t nháº¥t nÃªn phÃ¢n quyá»n cho cÃ¡c user trong DBMS má»™t cÃ¡ch cháº·t cháº½ vÃ  há»£p lÃ½, Ä‘á»ƒ trÃ¡nh há»‘i háº­n vá» lÃ¢u vá» dÃ i.\u003c/p\u003e\n\u003cp\u003eVáº¥n Ä‘á» phÃ¢n quyá»n khÃ´ng pháº£i chá»‰ á»Ÿ trong DBMS, mÃ  cÃ²n á»Ÿ trong cáº£ há»‡ thá»‘ng, vÃ  cáº¥u hÃ¬nh \u003cstrong\u003eserver\u003c/strong\u003e. Nháº¯c láº¡i láº§n ná»¯a: \u003cstrong\u003ePhÃ¢n quyá»n cá»±c ká»³ quan trá»ng\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003ch2 id=\"káº¿t-luáº­n\"\u003eKáº¿t luáº­n\u003c/h2\u003e\n\u003cp\u003eSQL Injection khÃ´ng pháº£i má»™t váº¥n Ä‘á» má»›i máº», nÃ³ tá»“n táº¡i cáº£ má»™t tháº­p ká»· rá»“i nhÆ°ng nÃ³ váº«n Ä‘á»©ng Ä‘áº§u báº£ng xáº¿p háº¡ng vá» cÃ¡c lá»— há»•ng nguy hiá»ƒm nháº¥t trong nhiá»u nÄƒm liá»n. Chá»‰ vá»›i má»™t vÃ i bÆ°á»›c dá»… dÃ ng, há»‡ thá»‘ng cá»§a báº¡n cÃ³ thá»ƒ bá»‹ tÃª liá»‡t hoÃ n toÃ n... Chá»‘ng thÃ¬ khÃ³, mÃ  phÃ¡ thÃ¬ dá»… láº¯m.\u003c/p\u003e\n\u003cp\u003eNÃªn nhá»›:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eÄáº¡o cao má»™t thÆ°á»›c, ma cao má»™t trÆ°á»£ng.\u003c/p\u003e\n\u003c/blockquote\u003e","image":"/assets/blog/sql-database-hacking/featured.jpg","tags":["web","database","hacking","security"]}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"sql-database-hacking"},"buildId":"EoFBNuKZQIZTtRXAUTpDc","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>